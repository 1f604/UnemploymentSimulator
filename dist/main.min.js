!function e(t,n,r){function i(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e){"use strict";var t,n,r,i,o,s;e("./helpers"),t=e("jquery"),s=e("underscore"),r=e("./visualizer/visualizer"),n=e("dat-gui"),i=e("./model/world"),o=e("./settings"),t(function(){var e,s,a,u;return e=t("<canvas />",{id:"canvas"}),t(document.body).append(e),window.world=new i,world.load(),0===world.intersections.length&&(world.generateMap(),world.carsNumber=100),window.visualizer=new r(world),visualizer.start(),s=new n.GUI,u=s.addFolder("world"),u.open(),u.add(world,"save"),u.add(world,"load"),u.add(world,"clear"),u.add(world,"generateMap"),a=s.addFolder("visualizer"),a.open(),a.add(visualizer,"running").listen(),a.add(visualizer,"debug").listen(),a.add(visualizer.zoomer,"scale",.1,2).listen(),a.add(visualizer,"timeFactor",.1,10).listen(),u.add(world,"carsNumber").min(0).max(200).step(1).listen(),u.add(world,"instantSpeed").step(1e-5).listen(),s.add(o,"lightsFlipInterval",0,50,.01).listen()})},{"./helpers":6,"./model/world":15,"./settings":16,"./visualizer/visualizer":24,"dat-gui":27,jquery:31,underscore:32}],2:[function(e,t){"use strict";var n,r;e("../helpers"),r=e("./segment"),n=function(){function e(e,t,n,i){this.A=e,this.B=t,this.O=n,this.Q=i,this.AB=new r(this.A,this.B),this.AO=new r(this.A,this.O),this.OQ=new r(this.O,this.Q),this.QB=new r(this.Q,this.B),this._length=null}return e.property("length",{get:function(){var e,t,n,r,i;if(null==this._length)for(n=10,r=null,this._length=0,e=i=0;n>=0?n>=i:i>=n;e=n>=0?++i:--i)t=this.getPoint(e/n),r&&(this._length+=t.subtract(r).length),r=t;return this._length}}),e.prototype.getPoint=function(e){var t,n,i,o,s;return t=this.AO.getPoint(e),n=this.OQ.getPoint(e),i=this.QB.getPoint(e),o=new r(t,n).getPoint(e),s=new r(n,i).getPoint(e),new r(o,s).getPoint(e)},e.prototype.getDirection=function(e){var t,n,i,o,s;return t=this.AO.getPoint(e),n=this.OQ.getPoint(e),i=this.QB.getPoint(e),o=new r(t,n).getPoint(e),s=new r(n,i).getPoint(e),new r(o,s).direction},e}(),t.exports=n},{"../helpers":6,"./segment":5}],3:[function(e,t){"use strict";var n,r,i;i=Math.sqrt,r=Math.atan2,e("../helpers"),n=function(){function e(e,t){this.x=null!=e?e:0,this.y=null!=t?t:0}return e.property("length",{get:function(){return i(this.x*this.x+this.y*this.y)}}),e.property("direction",{get:function(){return r(this.y,this.x)}}),e.property("normalized",{get:function(){return new e(this.x/this.length,this.y/this.length)}}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mult=function(t){return new e(this.x*t,this.y*t)},e.prototype.divide=function(t){return new e(this.x/t,this.y/t)},e}(),t.exports=n},{"../helpers":6}],4:[function(e,t){"use strict";var n,r,i,o,s;o=Math.abs,e("../helpers"),s=e("underscore"),n=e("./point"),i=e("./segment"),r=function(){function e(e,t,n,r){this.x=e,this.y=t,this._width=null!=n?n:0,this._height=null!=r?r:0}return e.copy=function(t){return new e(t.x,t.y,t._width,t._height)},e.prototype.toJSON=function(){return s.extend({},this)},e.prototype.area=function(){return this.width()*this.height()},e.prototype.left=function(e){return null!=e&&(this.x=e),this.x},e.prototype.right=function(e){return null!=e&&(this.x=e-this.width()),this.x+this.width()},e.prototype.width=function(e){return null!=e&&(this._width=e),this._width},e.prototype.top=function(e){return null!=e&&(this.y=e),this.y},e.prototype.bottom=function(e){return null!=e&&(this.y=e-this.height()),this.y+this.height()},e.prototype.height=function(e){return null!=e&&(this._height=e),this._height},e.prototype.center=function(e){return null!=e&&(this.x=e.x-this.width()/2,this.y=e.y-this.height()/2),new n(this.x+this.width()/2,this.y+this.height()/2)},e.prototype.containsPoint=function(e){var t,n;return this.left()<=(t=e.x)&&t<=this.right()&&this.top()<=(n=e.y)&&n<=this.bottom()},e.prototype.containsRect=function(e){return this.left()<=e.left()&&e.right()<=this.right()&&this.top()<=e.top()&&e.bottom()<=this.bottom()},e.prototype.getVertices=function(){return[new n(this.left(),this.top()),new n(this.right(),this.top()),new n(this.right(),this.bottom()),new n(this.left(),this.bottom())]},e.prototype.getSide=function(e){var t;return t=this.getVertices(),new i(t[e],t[(e+1)%4])},e.prototype.getSectorId=function(e){var t;if(t=e.subtract(this.center()),t.y<=0&&o(t.x)<=o(t.y))return 0;if(t.x>=0&&o(t.x)>=o(t.y))return 1;if(t.y>=0&&o(t.x)<=o(t.y))return 2;if(t.x<=0&&o(t.x)>=o(t.y))return 3;throw Error("algorithm error")},e.prototype.getSector=function(e){return this.getSide(this.getSectorId(e))},e}(),t.exports=r},{"../helpers":6,"./point":3,"./segment":5,underscore:32}],5:[function(e,t){"use strict";var n;e("../helpers"),n=function(){function e(e,t){this.source=e,this.target=t}return e.property("vector",{get:function(){return this.target.subtract(this.source)}}),e.property("length",{get:function(){return this.vector.length}}),e.property("direction",{get:function(){return this.vector.direction}}),e.property("center",{get:function(){return this.getPoint(.5)}}),e.prototype.split=function(e,t){var n,r,i,o,s,a,u,l;for(r=t?function(){a=[];for(var t=s=e-1;0>=s?0>=t:t>=0;0>=s?t++:t--)a.push(t);return a}.apply(this):function(){u=[];for(var t=0,n=e-1;n>=0?n>=t:t>=n;n>=0?t++:t--)u.push(t);return u}.apply(this),l=[],i=0,o=r.length;o>i;i++)n=r[i],l.push(this.subsegment(n/e,(n+1)/e));return l},e.prototype.getPoint=function(e){return this.source.add(this.vector.mult(e))},e.prototype.subsegment=function(t,n){var r,i,o;return i=this.vector,o=this.source.add(i.mult(t)),r=this.source.add(i.mult(n)),new e(o,r)},e}(),t.exports=n},{"../helpers":6}],6:[function(e,t){"use strict";t.exports={},Function.prototype.property=function(e,t){return Object.defineProperty(this.prototype,e,t)}},{}],7:[function(e,t){"use strict";var n,r,i,o,s,a,u;i=Math.max,o=Math.min,s=Math.random,a=Math.sqrt,e("../helpers"),u=e("underscore"),r=e("./trajectory"),n=function(){function e(e,t){this.id=u.uniqueId("car"),this.color=(300+240*s()|0)%360,this._speed=0,this.width=1.7,this.length=3+2*s(),this.maxSpeed=30,this.s0=2,this.timeHeadway=1.5,this.maxAcceleration=1,this.maxDeceleration=3,this.trajectory=new r(this,e,t),this.alive=!0,this.preferedLane=null}return e.property("coords",{get:function(){return this.trajectory.coords}}),e.property("speed",{get:function(){return this._speed},set:function(e){return 0>e&&(e=0),e>this.maxSpeed&&(e=this.maxSpeed),this._speed=e}}),e.property("direction",{get:function(){return this.trajectory.direction}}),e.prototype.release=function(){return this.trajectory.release()},e.prototype.getAcceleration=function(){var e,t,n,r,o,s,u,l,c,h,f,d,p,g,m;return f=this.trajectory.nextCarDistance,l=i(f.distance,0),e=this.maxAcceleration,t=this.maxDeceleration,s=this.speed-(null!=(m=f.car)?m.speed:void 0)||0,c=Math.pow(this.speed/this.maxSpeed,4),u=this.s0,g=this.speed*this.timeHeadway,n=this.speed*s/(2*a(e*t)),d=u+g+n,r=Math.pow(d/l,2),p=1+g+Math.pow(this.speed,2)/(2*t),h=Math.pow(p/this.trajectory.distanceToStopLine,2),o=1-c-r-h,this.maxAcceleration*o},e.prototype.move=function(e){var t,n,r,i,o;return t=this.getAcceleration(),this.speed+=t*e,!this.trajectory.isChangingLanes&&this.nextLane&&(n=this.trajectory.current.lane,o=n.getTurnDirection(this.nextLane),r=function(){switch(o){case 0:return n.leftmostAdjacent;case 2:return n.rightmostAdjacent;default:return n}}(),r!==n&&this.trajectory.changeLane(r)),i=this.speed*e+.5*t*Math.pow(e,2),this.trajectory.nextCarDistance.distance<i&&console.log("bad IDM"),this.trajectory.timeToMakeTurn(i)&&null==this.nextLane?this.alive=!1:this.trajectory.moveForward(i)},e.prototype.pickNextRoad=function(){var e,t,n,r;return t=this.trajectory.nextIntersection,e=this.trajectory.current.lane,r=t.roads.filter(function(t){return t.target!==e.road.source}),0===r.length?null:n=u.sample(r)},e.prototype.pickNextLane=function(){var e,t,n;if(this.nextLane)throw Error("next lane is already chosen");if(this.nextLane=null,t=this.pickNextRoad(),!t)return null;if(n=this.trajectory.current.lane.road.getTurnDirection(t),e=function(){switch(n){case 0:return t.lanesNumber-1;case 1:return u.random(0,t.lanesNumber-1);case 2:return 0}}(),this.nextLane=t.lanes[e],!this.nextLane)throw Error("can not pick next lane");return this.nextLane},e.prototype.popNextLane=function(){var e;return e=this.nextLane,this.nextLane=null,this.preferedLane=null,e},e}(),t.exports=n},{"../helpers":6,"./trajectory":14,underscore:32}],8:[function(e,t){"use strict";var n,r,i,o=function(e,t){return function(){return e.apply(t,arguments)}},s=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=Math.random,e("../helpers"),i=e("../settings"),n=function(){function e(e){this.intersection=e,this.onTick=o(this.onTick,this),this.flipMultiplier=1,this.phaseOffset=100*r(),this.time=this.phaseOffset,this.stateNum=0}return e.prototype.states=[["L","","L",""],["FR","","FR",""],["","L","","L"],["","FR","","FR"]],e.STATE=[{RED:0,GREEN:1}],e.property("flipInterval",{get:function(){return this.flipMultiplier*i.lightsFlipInterval}}),e.prototype._decode=function(e){var t;return t=[0,0,0],s.call(e,"L")>=0&&(t[0]=1),s.call(e,"F")>=0&&(t[1]=1),s.call(e,"R")>=0&&(t[2]=1),t},e.property("state",{get:function(){var e,t,n,r,i;for(e=this.states[this.stateNum%this.states.length],this.intersection.roads.length<=2&&(e=["LFR","LFR","LFR","LFR"]),i=[],n=0,r=e.length;r>n;n++)t=e[n],i.push(this._decode(t));return i}}),e.prototype.flip=function(){return this.stateNum+=1},e.prototype.onTick=function(e){return this.time+=e,this.time>this.flipInterval?(this.flip(),this.time-=this.flipInterval):void 0},e}(),t.exports=n},{"../helpers":6,"../settings":16}],9:[function(e,t){"use strict";var n,r,i,o;e("../helpers"),o=e("underscore"),n=e("./control-signals"),i=e("../geom/rect"),r=function(){function e(e){this.rect=e,this.id=o.uniqueId("intersection"),this.roads=[],this.inRoads=[],this.controlSignals=new n(this)}return e.copy=function(t){var r;return t.rect=i.copy(t.rect),r=Object.create(e.prototype),o.extend(r,t),r.roads=[],r.inRoads=[],r.controlSignals=new n(r),r},e.prototype.toJSON=function(){var e;return e={id:this.id,rect:this.rect}},e.prototype.update=function(){var e,t,n,r,i,o,s,a;for(o=this.roads,t=0,r=o.length;r>t;t++)e=o[t],e.update();for(s=this.inRoads,a=[],n=0,i=s.length;i>n;n++)e=s[n],a.push(e.update());return a},e}(),t.exports=r},{"../geom/rect":4,"../helpers":6,"./control-signals":8,underscore:32}],10:[function(e,t){"use strict";var n,r;e("../helpers"),r=e("underscore"),n=function(){function e(e,t,n){this.car=e,this.position=n,this.id=r.uniqueId("laneposition"),this.free=!0,this.lane=t}return e.property("lane",{get:function(){return this._lane},set:function(e){return this.release(),this._lane=e}}),e.property("relativePosition",{get:function(){return this.position/this.lane.length}}),e.prototype.acquire=function(){var e;return null!=(null!=(e=this.lane)?e.addCarPosition:void 0)?(this.free=!1,this.lane.addCarPosition(this)):void 0},e.prototype.release=function(){var e;return!this.free&&(null!=(e=this.lane)?e.removeCar:void 0)?(this.free=!0,this.lane.removeCar(this)):void 0},e.prototype.getNext=function(){return this.lane&&!this.free?this.lane.getNext(this):void 0},e.property("nextCarDistance",{get:function(){var e,t,n,r;return t=this.getNext(),t?(n=t.position-t.car.length/2,e=this.position+this.car.length/2,r={car:t.car,distance:n-e}):r={car:null,distance:1/0}}}),e}(),t.exports=n},{"../helpers":6,underscore:32}],11:[function(e,t){"use strict";var n,r,i;e("../helpers"),i=e("underscore"),r=e("../geom/segment"),n=function(){function e(e,t,n){this.sourceSegment=e,this.targetSegment=t,this.road=n,this.leftAdjacent=null,this.rightAdjacent=null,this.leftmostAdjacent=null,this.rightmostAdjacent=null,this.carsPositions={},this.update()}return e.prototype.toJSON=function(){var e;return e=i.extend({},this),delete e.carsPositions,e},e.property("sourceSideId",{get:function(){return this.road.sourceSideId}}),e.property("targetSideId",{get:function(){return this.road.targetSideId}}),e.property("isRightmost",{get:function(){return this===this.rightmostAdjacent}}),e.property("isLeftmost",{get:function(){return this===this.leftmostAdjacent}}),e.property("leftBorder",{get:function(){return new r(this.sourceSegment.source,this.targetSegment.target)}}),e.property("rightBorder",{get:function(){return new r(this.sourceSegment.target,this.targetSegment.source)}}),e.prototype.update=function(){return this.middleLine=new r(this.sourceSegment.center,this.targetSegment.center),this.length=this.middleLine.length,this.direction=this.middleLine.direction},e.prototype.getTurnDirection=function(e){return this.road.getTurnDirection(e.road)},e.prototype.getDirection=function(){return this.direction},e.prototype.getPoint=function(e){return this.middleLine.getPoint(e)},e.prototype.addCarPosition=function(e){if(e.id in this.carsPositions)throw Error("car is already here");return this.carsPositions[e.id]=e},e.prototype.removeCar=function(e){if(!(e.id in this.carsPositions))throw Error("removing unknown car");return delete this.carsPositions[e.id]},e.prototype.getNext=function(e){var t,n,r,i,o,s;if(e.lane!==this)throw Error("car is on other lane");i=null,t=1/0,s=this.carsPositions;for(r in s)o=s[r],n=o.position-e.position,!o.free&&n>0&&t>n&&(t=n,i=o);return i},e}(),t.exports=n},{"../geom/segment":5,"../helpers":6,underscore:32}],12:[function(e,t){"use strict";var n;e("../helpers"),n=function(){function e(e,t){var n,r,i;if(this.factory=e,this.objects={},null!=t&&null!=t.objects){i=t.objects;for(n in i)r=i[n],this.objects[n]=this.factory.copy(r)}}return e.prototype.toJSON=function(){return this.objects},e.prototype.get=function(e){return this.objects[e]},e.prototype.put=function(e){return this.objects[e.id]=e},e.prototype.pop=function(e){var t,n,r;return t=null!=(r=e.id)?r:e,n=this.objects[t],"function"==typeof n.release&&n.release(),delete this.objects[t],n},e.prototype.all=function(){return this.objects},e.prototype.clear=function(){return this.objects={}},e.property("length",{get:function(){return Object.keys(this.objects).length}}),e}(),t.exports=n},{"../helpers":6}],13:[function(e,t){"use strict";var n,r,i,o,s,a;o=Math.min,i=Math.max,e("../helpers"),a=e("underscore"),n=e("./lane"),s=e("../settings"),r=function(){function e(e,t){this.source=e,this.target=t,this.id=a.uniqueId("road"),this.lanes=[],this.lanesNumber=null,this.update()}return e.copy=function(t){var n;return n=Object.create(e.prototype),a.extend(n,t),null==n.lanes&&(n.lanes=[]),n},e.prototype.toJSON=function(){var e;return e={id:this.id,source:this.source.id,target:this.target.id}},e.property("length",{get:function(){return this.targetSide.target.subtract(this.sourceSide.source).length}}),e.property("leftmostLane",{get:function(){return this.lanes[this.lanesNumber-1]}}),e.property("rightmostLane",{get:function(){return this.lanes[0]}}),e.prototype.getTurnDirection=function(e){var t,n,r;if(this.target!==e.source)throw Error("invalid roads");return t=this.targetSideId,n=e.sourceSideId,r=(n-t-1+8)%4},e.prototype.update=function(){var e,t,r,a,u,l,c,h,f;if(!this.source||!this.target)throw Error("incomplete road");if(this.sourceSideId=this.source.rect.getSectorId(this.target.rect.center()),this.sourceSide=this.source.rect.getSide(this.sourceSideId).subsegment(.5,1),this.targetSideId=this.target.rect.getSectorId(this.source.rect.center()),this.targetSide=this.target.rect.getSide(this.targetSideId).subsegment(0,.5),this.lanesNumber=0|o(this.sourceSide.length,this.targetSide.length),this.lanesNumber=i(2,this.lanesNumber/s.gridSize|0),t=this.sourceSide.split(this.lanesNumber,!0),r=this.targetSide.split(this.lanesNumber),null==this.lanes||this.lanes.length<this.lanesNumber)for(null==this.lanes&&(this.lanes=[]),e=u=0,c=this.lanesNumber-1;c>=0?c>=u:u>=c;e=c>=0?++u:--u)null==(a=this.lanes)[e]&&(a[e]=new n(t[e],r[e],this));for(f=[],e=l=0,h=this.lanesNumber-1;h>=0?h>=l:l>=h;e=h>=0?++l:--l)this.lanes[e].sourceSegment=t[e],this.lanes[e].targetSegment=r[e],this.lanes[e].leftAdjacent=this.lanes[e+1],this.lanes[e].rightAdjacent=this.lanes[e-1],this.lanes[e].leftmostAdjacent=this.lanes[this.lanesNumber-1],this.lanes[e].rightmostAdjacent=this.lanes[0],f.push(this.lanes[e].update());return f},e}(),t.exports=r},{"../helpers":6,"../settings":16,"./lane":11,underscore:32}],14:[function(e,t){"use strict";var n,r,i,o,s,a;s=Math.min,o=Math.max,e("../helpers"),r=e("./lane-position"),n=e("../geom/curve"),a=e("underscore"),i=function(){function e(e,t,n){this.car=e,null==n&&(n=0),this.current=new r(this.car,t,n),this.current.acquire(),this.next=new r(this.car),this.temp=new r(this.car),this.isChangingLanes=!1}return e.property("lane",{get:function(){return this.temp.lane||this.current.lane}}),e.property("absolutePosition",{get:function(){return null!=this.temp.lane?this.temp.position:this.current.position}}),e.property("relativePosition",{get:function(){return this.absolutePosition/this.lane.length}}),e.property("direction",{get:function(){return this.lane.getDirection(this.relativePosition)}}),e.property("coords",{get:function(){return this.lane.getPoint(this.relativePosition)}}),e.property("nextCarDistance",{get:function(){var e,t;return e=this.current.nextCarDistance,t=this.next.nextCarDistance,e.distance<t.distance?e:t}}),e.property("distanceToStopLine",{get:function(){return this.canEnterIntersection()?1/0:this.getDistanceToIntersection()}}),e.property("nextIntersection",{get:function(){return this.current.lane.road.target}}),e.property("previousIntersection",{get:function(){return this.current.lane.road.source}}),e.prototype.isValidTurn=function(){var e,t,n;if(e=this.car.nextLane,t=this.current.lane,!e)throw Error("no road to enter");if(n=t.getTurnDirection(e),3===n)throw Error("no U-turns are allowed");if(0===n&&!t.isLeftmost)throw Error("no left turns from this lane");if(2===n&&!t.isRightmost)throw Error("no right turns from this lane");return!0},e.prototype.canEnterIntersection=function(){var e,t,n,r,i;return t=this.car.nextLane,r=this.current.lane,t?(e=this.nextIntersection,i=r.getTurnDirection(t),n=r.road.targetSideId,e.controlSignals.state[n][i]):!0},e.prototype.getDistanceToIntersection=function(){var e;return e=this.current.lane.length-this.car.length/2-this.current.position,this.isChangingLanes?1/0:o(e,0)},e.prototype.timeToMakeTurn=function(e){return null==e&&(e=0),this.getDistanceToIntersection()<=e},e.prototype.moveForward=function(e){var t,n,r,i;return e=o(e,0),this.current.position+=e,this.next.position+=e,this.temp.position+=e,this.timeToMakeTurn()&&this.canEnterIntersection()&&this.isValidTurn()&&this._startChangingLanes(this.car.popNextLane(),0),n=this.temp.position/(null!=(r=this.temp.lane)?r.length:void 0),t=2*this.car.length,this.isChangingLanes&&this.temp.position>t&&!this.current.free&&this.current.release(),this.isChangingLanes&&this.next.free&&this.temp.position+t>(null!=(i=this.temp.lane)?i.length:void 0)&&this.next.acquire(),this.isChangingLanes&&n>=1&&this._finishChangingLanes(),!this.current.lane||this.isChangingLanes||this.car.nextLane?void 0:this.car.pickNextLane()},e.prototype.changeLane=function(e){var t;if(this.isChangingLanes)throw Error("already changing lane");if(null==e)throw Error("no next lane");if(e===this.lane)throw Error("next lane == current lane");if(this.lane.road!==e.road)throw Error("not neighbouring lanes");if(t=this.current.position+3*this.car.length,!(t<this.lane.length))throw Error("too late to change lane");return this._startChangingLanes(e,t)},e.prototype._getIntersectionLaneChangeCurve=function(){},e.prototype._getAdjacentLaneChangeCurve=function(){var e,t,r,i,o,s,a,u;return a=this.current.lane.getPoint(this.current.relativePosition),u=this.next.lane.getPoint(this.next.relativePosition),s=u.subtract(a).length,i=this.current.lane.middleLine.vector.normalized.mult(.3*s),e=a.add(i),o=this.next.lane.middleLine.vector.normalized.mult(.3*s),t=u.subtract(o),r=new n(a,u,e,t)},e.prototype._getCurve=function(){return this._getAdjacentLaneChangeCurve()},e.prototype._startChangingLanes=function(e,t){var n;if(this.isChangingLanes)throw Error("already changing lane");if(null==e)throw Error("no next lane");return this.isChangingLanes=!0,this.next.lane=e,this.next.position=t,n=this._getCurve(),this.temp.lane=n,this.temp.position=0,this.next.position-=this.temp.lane.length},e.prototype._finishChangingLanes=function(){if(!this.isChangingLanes)throw Error("no lane changing is going on");return this.isChangingLanes=!1,this.current.lane=this.next.lane,this.current.position=this.next.position||0,this.current.acquire(),this.next.lane=null,this.next.position=0/0,this.temp.lane=null,this.temp.position=0/0,this.current.lane},e.prototype.release=function(){var e,t,n;return null!=(e=this.current)&&e.release(),null!=(t=this.next)&&t.release(),null!=(n=this.temp)?n.release():void 0},e}(),t.exports=i},{"../geom/curve":2,"../helpers":6,"./lane-position":10,underscore:32}],15:[function(e,t){"use strict";var n,r,i,o,s,a,u,l,c,h=function(e,t){return function(){return e.apply(t,arguments)}};u=Math.random,e("../helpers"),c=e("underscore"),n=e("./car"),r=e("./intersection"),s=e("./road"),i=e("./pool"),o=e("../geom/rect"),l=e("../settings"),a=function(){function e(){this.onTick=h(this.onTick,this),this.set({})}return e.property("instantSpeed",{get:function(){var e;return e=c.map(this.cars.all(),function(e){return e.speed}),0===e.length?0:c.reduce(e,function(e,t){return e+t})/e.length}}),e.prototype.set=function(e){return null==e&&(e={}),this.intersections=new i(r,e.intersections),this.roads=new i(s,e.roads),this.cars=new i(n,e.cars),this.carsNumber=0},e.prototype.save=function(){var e;return e=c.extend({},this),delete e.cars,localStorage.world=JSON.stringify(e)},e.prototype.load=function(){var e,t,n,i,o,a,u;if(e=localStorage.world,e=e&&JSON.parse(e),null!=e){this.clear(),this.carsNumber=e.carsNumber||0,o=e.intersections;for(t in o)n=o[t],this.addIntersection(r.copy(n));a=e.roads,u=[];for(t in a)i=a[t],i=s.copy(i),i.source=this.getIntersection(i.source),i.target=this.getIntersection(i.target),u.push(this.addRoad(i));return u}},e.prototype.generateMap=function(e,t,n,i){var a,h,f,d,p,g,m,v,y,b,_,x,w;for(null==e&&(e=-2),null==t&&(t=2),null==n&&(n=-2),null==i&&(i=2),this.clear(),f=.8*(t-e+1)*(i-n+1)|0,d={},a=l.gridSize,m=5*a,this.carsNumber=100;f>0;)v=c.random(e,t),y=c.random(n,i),null==d[[v,y]]&&(g=new o(m*v,m*y,a,a),h=new r(g),this.addIntersection(d[[v,y]]=h),f-=1);for(v=b=e;t>=e?t>=b:b>=t;v=t>=e?++b:--b)for(p=null,y=_=n;i>=n?i>=_:_>=i;y=i>=n?++_:--_)h=d[[v,y]],null!=h&&(u()<.9&&(null!=p&&this.addRoad(new s(h,p)),null!=p&&this.addRoad(new s(p,h))),p=h);for(y=x=n;i>=n?i>=x:x>=i;y=i>=n?++x:--x)for(p=null,v=w=e;t>=e?t>=w:w>=t;v=t>=e?++w:--w)h=d[[v,y]],null!=h&&(u()<.9&&(null!=p&&this.addRoad(new s(h,p)),null!=p&&this.addRoad(new s(p,h))),p=h);return null},e.prototype.clear=function(){return this.set({})},e.prototype.onTick=function(e){var t,n,r,i,o,s;if(e>1)throw Error("delta > 1");this.refreshCars(),i=this.intersections.all();for(n in i)r=i[n],r.controlSignals.onTick(e);o=this.cars.all(),s=[];for(n in o)t=o[n],t.move(e),t.alive?s.push(void 0):s.push(this.removeCar(t));return s},e.prototype.refreshCars=function(){return this.cars.length<this.carsNumber&&this.addRandomCar(),this.cars.length>this.carsNumber?this.removeRandomCar():void 0},e.prototype.addRoad=function(e){return this.roads.put(e),e.source.roads.push(e),e.target.inRoads.push(e),e.update()},e.prototype.getRoad=function(e){return this.roads.get(e)},e.prototype.addCar=function(e){return this.cars.put(e)},e.prototype.getCar=function(e){return this.cars.get(e)},e.prototype.removeCar=function(e){return this.cars.pop(e)},e.prototype.addIntersection=function(e){return this.intersections.put(e)},e.prototype.getIntersection=function(e){return this.intersections.get(e)},e.prototype.addRandomCar=function(){var e,t;return t=c.sample(this.roads.all()),null!=t&&(e=c.sample(t.lanes),null!=e)?this.addCar(new n(e)):void 0},e.prototype.removeRandomCar=function(){var e;return e=c.sample(this.cars.all()),null!=e?this.removeCar(e):void 0},e}(),t.exports=a},{"../geom/rect":4,"../helpers":6,"../settings":16,"./car":7,"./intersection":9,"./pool":12,"./road":13,underscore:32}],16:[function(e,t){"use strict";var n;n={colors:{background:"#97a1a1",redLight:"hsl(0, 100%, 50%)",greenLight:"#85ee00",intersection:"#586970",road:"#586970",roadMarking:"#bbb",hoveredIntersection:"#3d4c53",tempRoad:"#aaa",gridPoint:"#586970",grid1:"rgba(255, 255, 255, 0.5)",grid2:"rgba(220, 220, 220, 0.5)",hoveredGrid:"#f4e8e1"},fps:30,lightsFlipInterval:20,gridSize:14,defaultTimeFactor:5},t.exports=n},{}],17:[function(e,t){"use strict";var n,r,i=[].slice;r=Math.PI,e("../helpers.coffee"),n=function(){function e(e){this.ctx=e}return e.prototype.fillRect=function(e,t,n){var r;return null!=t&&(this.ctx.fillStyle=t),r=this.ctx.globalAlpha,null!=n&&(this.ctx.globalAlpha=n),this.ctx.fillRect(e.left(),e.top(),e.width(),e.height()),this.ctx.globalAlpha=r},e.prototype.drawRect=function(e){var t,n,r,i,o;for(this.ctx.beginPath,n=e.getVertices(),this.ctx.beginPath(),this.moveTo(n[0]),o=n.slice(1),r=0,i=o.length;i>r;r++)t=o[r],this.lineTo(t);return this.ctx.closePath()},e.prototype.drawImage=function(e,t){return this.ctx.drawImage(e,t.left(),t.top(),t.width(),t.height())},e.prototype.clear=function(e){return this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)},e.prototype.moveTo=function(e){return this.ctx.moveTo(e.x,e.y)},e.prototype.lineTo=function(e){return this.ctx.lineTo(e.x,e.y)},e.prototype.drawLine=function(e,t){return this.ctx.beginPath(),this.moveTo(e),this.lineTo(t)},e.prototype.drawSegment=function(e){return this.drawLine(e.source,e.target)},e.prototype.drawCurve=function(e,t,n){var i,o,s,a;for(s=10,this.ctx.lineWidth=t,this.ctx.beginPath(),this.moveTo(e.getPoint(0)),i=a=0;s>=0?s>=a:a>=s;i=s>=0?++a:--a)o=e.getPoint(i/s),this.lineTo(o);return e.O&&(this.moveTo(e.O),this.ctx.arc(e.O.x,e.O.y,t,0,2*r)),e.Q&&(this.moveTo(e.Q),this.ctx.arc(e.Q.x,e.Q.y,t,0,2*r)),n?this.stroke(n):void 0},e.prototype.drawTriangle=function(e,t,n){return this.ctx.beginPath(),this.moveTo(e),this.lineTo(t),this.lineTo(n)},e.prototype.fill=function(e,t){var n;return this.ctx.fillStyle=e,n=this.ctx.globalAlpha,null!=t&&(this.ctx.globalAlpha=t),this.ctx.fill(),this.ctx.globalAlpha=n},e.prototype.stroke=function(e){return this.ctx.strokeStyle=e,this.ctx.stroke()},e.prototype.polyline=function(){var e,t,n,r,o;if(t=1<=arguments.length?i.call(arguments,0):[],t.length>=1){for(this.ctx.beginPath(),this.moveTo(t[0]),o=t.slice(1),n=0,r=o.length;r>n;n++)e=o[n],this.lineTo(e);return this.ctx.closePath()}},e.prototype.save=function(){return this.ctx.save()},e.prototype.restore=function(){return this.ctx.restore()},e}(),t.exports=n},{"../helpers.coffee":6}],18:[function(e,t){"use strict";var n,r,i,o=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};e("../helpers.coffee"),n=e("./tool.coffee"),i=e("../settings.coffee"),r=function(e){function t(){this.draw=o(this.draw,this),this.mouseout=o(this.mouseout,this),this.mousemove=o(this.mousemove,this),t.__super__.constructor.apply(this,arguments),this.hoveredCell=null}return a(t,e),t.prototype.mousemove=function(e){var t,n,r,o,s;t=this.getCell(e),n=this.getHoveredIntersection(t),this.hoveredCell=t,s=this.visualizer.world.intersections.all();for(r in s)o=s[r],o.color=null;return null!=n?n.color=i.colors.hoveredIntersection:void 0},t.prototype.mouseout=function(){return this.hoveredCell=null},t.prototype.draw=function(){var e;return this.hoveredCell?(e=i.colors.hoveredGrid,this.visualizer.graphics.fillRect(this.hoveredCell,e,.5)):void 0},t}(n),t.exports=r},{"../helpers.coffee":6,"../settings.coffee":16,"./tool.coffee":23}],19:[function(e,t){"use strict";var n,r,i,o=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};e("../helpers.coffee"),r=e("./tool.coffee"),n=e("../model/intersection.coffee"),i=function(e){function t(){this.draw=o(this.draw,this),this.mouseout=o(this.mouseout,this),this.mousemove=o(this.mousemove,this),this.mouseup=o(this.mouseup,this),this.mousedown=o(this.mousedown,this),t.__super__.constructor.apply(this,arguments),this.tempIntersection=null,this.mouseDownPos=null}return a(t,e),t.prototype.mousedown=function(e){return this.mouseDownPos=this.getCell(e),e.shiftKey?(this.tempIntersection=new n(this.mouseDownPos),e.stopImmediatePropagation()):void 0},t.prototype.mouseup=function(){return this.tempIntersection&&(this.visualizer.world.addIntersection(this.tempIntersection),this.tempIntersection=null),this.mouseDownPos=null},t.prototype.mousemove=function(e){var t;return this.tempIntersection?(t=this.visualizer.zoomer.getBoundingBox(this.mouseDownPos,this.getCell(e)),this.tempIntersection.rect=t):void 0},t.prototype.mouseout=function(){return this.mouseDownPos=null,this.tempIntersection=null},t.prototype.draw=function(){return this.tempIntersection?this.visualizer.drawIntersection(this.tempIntersection,.4):void 0},t}(r),t.exports=i},{"../helpers.coffee":6,"../model/intersection.coffee":9,"./tool.coffee":23}],20:[function(e,t){"use strict";var n,r,i=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty,s=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};e("../helpers.coffee"),n=e("./tool.coffee"),r=function(e){function t(){this.mouseout=i(this.mouseout,this),this.mousemove=i(this.mousemove,this),this.mouseup=i(this.mouseup,this),this.mousedown=i(this.mousedown,this),t.__super__.constructor.apply(this,arguments),this.intersection=null}return s(t,e),t.prototype.mousedown=function(e){var t;return t=this.getHoveredIntersection(this.getCell(e)),t?(this.intersection=t,e.stopImmediatePropagation()):void 0},t.prototype.mouseup=function(){return this.intersection=null},t.prototype.mousemove=function(e){var t;return this.intersection?(t=this.getCell(e),this.intersection.rect.left(t.x),this.intersection.rect.top(t.y),this.intersection.update()):void 0},t.prototype.mouseout=function(){return this.intersection=null},t}(n),t.exports=r},{"../helpers.coffee":6,"./tool.coffee":23}],21:[function(e,t){"use strict";var n,r,i=function(e,t){return function(){return e.apply(t,arguments)}},o={}.hasOwnProperty,s=function(e,t){function n(){this.constructor=e}for(var r in t)o.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};e("../helpers.coffee"),r=e("./tool.coffee"),n=function(e){function t(){this.mouseout=i(this.mouseout,this),this.mousemove=i(this.mousemove,this),this.mouseup=i(this.mouseup,this),this.mousedown=i(this.mousedown,this),t.__super__.constructor.apply(this,arguments),this.startPosition=null}return s(t,e),t.prototype.contextmenu=function(){return!1},t.prototype.mousedown=function(e){return this.startPosition=this.getPoint(e),e.stopImmediatePropagation()},t.prototype.mouseup=function(){return this.startPosition=null},t.prototype.mousemove=function(e){var t;return this.startPosition?(t=this.getPoint(e).subtract(this.startPosition),this.visualizer.zoomer.moveCenter(t),this.startPosition=this.getPoint(e)):void 0},t.prototype.mouseout=function(){return this.startPosition=null
},t}(r),t.exports=n},{"../helpers.coffee":6,"./tool.coffee":23}],22:[function(e,t){"use strict";var n,r,i,o=function(e,t){return function(){return e.apply(t,arguments)}},s={}.hasOwnProperty,a=function(e,t){function n(){this.constructor=e}for(var r in t)s.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};e("../helpers.coffee"),r=e("./tool.coffee"),n=e("../model/road.coffee"),i=function(e){function t(){this.draw=o(this.draw,this),this.mouseout=o(this.mouseout,this),this.mousemove=o(this.mousemove,this),this.mouseup=o(this.mouseup,this),this.mousedown=o(this.mousedown,this),t.__super__.constructor.apply(this,arguments),this.sourceIntersection=null,this.road=null,this.dualRoad=null}return a(t,e),t.prototype.mousedown=function(e){var t,n;return t=this.getCell(e),n=this.getHoveredIntersection(t),e.shiftKey&&null!=n?(this.sourceIntersection=n,e.stopImmediatePropagation()):void 0},t.prototype.mouseup=function(){return null!=this.road&&this.visualizer.world.addRoad(this.road),null!=this.dualRoad&&this.visualizer.world.addRoad(this.dualRoad),this.road=this.dualRoad=this.sourceIntersection=null},t.prototype.mousemove=function(e){var t,r;return t=this.getCell(e),r=this.getHoveredIntersection(t),this.sourceIntersection&&r&&this.sourceIntersection.id!==r.id?null!=this.road?(this.road.target=r,this.dualRoad.source=r):(this.road=new n(this.sourceIntersection,r),this.dualRoad=new n(r,this.sourceIntersection)):this.road=this.dualRoad=null},t.prototype.mouseout=function(){return this.road=this.dualRoad=this.sourceIntersection=null},t.prototype.draw=function(){return null!=this.road&&this.visualizer.drawRoad(this.road,.4),null!=this.dualRoad?this.visualizer.drawRoad(this.dualRoad,.4):void 0},t}(r),t.exports=i},{"../helpers.coffee":6,"../model/road.coffee":13,"./tool.coffee":23}],23:[function(e,t){"use strict";var n,r,i,o,s,a;e("../helpers.coffee"),n=e("jquery"),a=e("underscore"),i=e("../geom/point.coffee"),o=e("../geom/rect.coffee"),e("jquery-mousewheel")(n),r=["click","mousedown","mouseup","mousemove","mouseout","mousewheel","contextmenu"],s=function(){function e(e,t){this.visualizer=e,this.ctx=this.visualizer.ctx,this.canvas=this.ctx.canvas,this.isBound=!1,t&&this.bind()}return e.prototype.bind=function(){var e,t,i,o;for(this.isBound=!0,o=[],t=0,i=r.length;i>t;t++)e=r[t],null!=this[e]&&o.push(n(this.canvas).on(e,this[e]));return o},e.prototype.unbind=function(){var e,t,i,o;for(this.isBound=!1,o=[],t=0,i=r.length;i>t;t++)e=r[t],null!=this[e]&&o.push(n(this.canvas).off(e,this[e]));return o},e.prototype.toggleState=function(){return this.isBound?this.unbind():this.bind()},e.prototype.draw=function(){},e.prototype.getPoint=function(e){return new i(e.pageX-this.canvas.offsetLeft,e.pageY-this.canvas.offsetTop)},e.prototype.getCell=function(e){return this.visualizer.zoomer.toCellCoords(this.getPoint(e))},e.prototype.getHoveredIntersection=function(e){var t,n,r;r=this.visualizer.world.intersections.all();for(t in r)if(n=r[t],n.rect.containsRect(e))return n},e}(),t.exports=s},{"../geom/point.coffee":3,"../geom/rect.coffee":4,"../helpers.coffee":6,jquery:31,"jquery-mousewheel":30,underscore:32}],24:[function(e,t){"use strict";var n,r,i,o,s,a,u,l,c,h,f,d,p,g,m,v=function(e,t){return function(){return e.apply(t,arguments)}};i=Math.PI,e("../helpers"),n=e("jquery"),m=e("underscore"),p=e("chroma-js"),o=e("../geom/point"),s=e("../geom/rect"),r=e("./graphics"),c=e("./mover"),l=e("./intersection-mover"),u=e("./intersection-builder"),h=e("./road-builder"),a=e("./highlighter"),d=e("./zoomer"),g=e("../settings"),f=function(){function e(e){this.world=e,this.draw=v(this.draw,this),this.$canvas=n("#canvas"),this.canvas=this.$canvas[0],this.ctx=this.canvas.getContext("2d"),this.carImage=new Image,this.carImage.src="images/car.png",this.updateCanvasSize(),this.zoomer=new d(4,this,!0),this.graphics=new r(this.ctx),this.toolRoadbuilder=new h(this,!0),this.toolIntersectionBuilder=new u(this,!0),this.toolHighlighter=new a(this,!0),this.toolIntersectionMover=new l(this,!0),this.toolMover=new c(this,!0),this._running=!1,this.previousTime=0,this.timeFactor=g.defaultTimeFactor,this.debug=!1}return e.prototype.drawIntersection=function(e,t){var n;return n=e.color||g.colors.intersection,this.graphics.drawRect(e.rect),this.ctx.lineWidth=.4,this.graphics.stroke(g.colors.roadMarking),this.graphics.fillRect(e.rect,n,t)},e.prototype.drawSignals=function(e){var t,n,r,s,a,u,l,c;return a=[g.colors.redLight,g.colors.greenLight],r=e.target,l=e.targetSide,c=e.targetSideId,s=r.controlSignals.state[c],this.ctx.save(),this.ctx.translate(l.center.x,l.center.y),this.ctx.rotate((c+1)*i/2),this.ctx.scale(1*l.length,1*l.length),s[0]&&(this.graphics.drawTriangle(new o(.1,-.2),new o(.2,-.4),new o(.3,-.2)),this.graphics.fill(g.colors.greenLight)),s[1]&&(this.graphics.drawTriangle(new o(.3,-.1),new o(.5,0),new o(.3,.1)),this.graphics.fill(g.colors.greenLight)),s[2]&&(this.graphics.drawTriangle(new o(.1,.2),new o(.2,.4),new o(.3,.2)),this.graphics.fill(g.colors.greenLight)),this.ctx.restore(),this.debug?(this.ctx.save(),this.ctx.fillStyle="black",this.ctx.font="1px Arial",t=r.rect.center(),n=Math.round(100*r.controlSignals.flipInterval)/100,u=Math.round(100*r.controlSignals.phaseOffset)/100,this.ctx.fillText(n+" "+u,t.x,t.y),this.ctx.restore()):void 0},e.prototype.drawRoad=function(e,t){var n,r,i,o,s,a,u,l,c,h;if(null==e.source||null==e.target)throw Error("invalid road");for(a=e.sourceSide,u=e.targetSide,this.ctx.save(),this.ctx.lineWidth=.4,i=e.leftmostLane.leftBorder,this.graphics.drawSegment(i),this.graphics.stroke(g.colors.roadMarking),s=e.rightmostLane.rightBorder,this.graphics.drawSegment(s),this.graphics.stroke(g.colors.roadMarking),this.ctx.restore(),this.graphics.polyline(a.source,a.target,u.source,u.target),this.graphics.fill(g.colors.road,t),this.ctx.save(),h=e.lanes.slice(1),l=0,c=h.length;c>l;l++)r=h[l],o=r.rightBorder,n=1,this.graphics.drawSegment(o),this.ctx.lineWidth=.2,this.ctx.lineDashOffset=1.5*n,this.ctx.setLineDash([n]),this.graphics.stroke(g.colors.roadMarking);return this.ctx.restore()},e.prototype.drawCar=function(e){var t,n,r,i,a,u,l,c;return t=e.direction,r=e.coords,u=new s(0,0,1.1*e.length,1.7*e.width),u.center(new o(0,0)),n=new s(0,0,e.length,e.width),n.center(new o(0,0)),this.graphics.save(),this.ctx.translate(r.x,r.y),this.ctx.rotate(t),a=.9-.3*e.speed/e.maxSpeed,l=p(e.color,.8,a,"hsl").hex(),this.graphics.fillRect(n,l),this.graphics.restore(),this.debug?(this.ctx.save(),this.ctx.fillStyle="black",this.ctx.font="1px Arial",this.ctx.fillText(e.id,r.x,r.y),null!=(i=null!=(c=e.trajectory.temp)?c.lane:void 0)&&this.graphics.drawCurve(i,.1,"red"),this.ctx.restore()):void 0},e.prototype.drawGrid=function(){var e,t,n,r,i,o,a,u,l,c;if(t=g.gridSize,e=this.zoomer.getBoundingBox(),!(e.area()>=2e3*t*t)){for(o=.4,c=[],n=a=u=e.left(),l=e.right();t>0?l>=a:a>=l;n=a+=t)c.push(function(){var a,u,l,c;for(c=[],r=a=u=e.top(),l=e.bottom();t>0?l>=a:a>=l;r=a+=t)i=new s(n-o/2,r-o/2,o,o),c.push(this.graphics.fillRect(i,g.colors.gridPoint));return c}.call(this));return c}},e.prototype.updateCanvasSize=function(){return this.$canvas.attr("width")!==n(window).width||this.$canvas.attr("height")!==n(window).height?this.$canvas.attr({width:n(window).width(),height:n(window).height()}):void 0},e.prototype.draw=function(e){var t,n,r,i,o,s,a,u,l;if(n=e-this.previousTime||0,n>30){n>100&&(n=100),this.previousTime=e,this.world.onTick(this.timeFactor*n/1e3),this.updateCanvasSize(),this.graphics.clear(g.colors.background),this.graphics.save(),this.zoomer.transform(),this.drawGrid(),s=this.world.intersections.all();for(r in s)i=s[r],this.drawIntersection(i,.9);a=this.world.roads.all();for(r in a)o=a[r],this.drawRoad(o,.9);u=this.world.roads.all();for(r in u)o=u[r],this.drawSignals(o);l=this.world.cars.all();for(r in l)t=l[r],this.drawCar(t);this.toolIntersectionBuilder.draw(),this.toolRoadbuilder.draw(),this.toolHighlighter.draw(),this.graphics.restore()}return this.running?window.requestAnimationFrame(this.draw):void 0},e.property("running",{get:function(){return this._running},set:function(e){return e?this.start():this.stop()}}),e.prototype.start=function(){return this._running?void 0:(this._running=!0,this.draw())},e.prototype.stop=function(){return this._running=!1},e}(),t.exports=f},{"../geom/point":3,"../geom/rect":4,"../helpers":6,"../settings":16,"./graphics":17,"./highlighter":18,"./intersection-builder":19,"./intersection-mover":20,"./mover":21,"./road-builder":22,"./zoomer":25,"chroma-js":26,jquery:31,underscore:32}],25:[function(e,t){"use strict";var n,r,i,o,s,a,u,l=function(e,t){return function(){return e.apply(t,arguments)}},c={}.hasOwnProperty,h=function(e,t){function n(){this.constructor=e}for(var r in t)c.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},f=[].slice;a=Math.min,s=Math.max,e("../helpers.coffee"),n=e("../geom/point.coffee"),r=e("../geom/rect.coffee"),i=e("./tool.coffee"),u=e("../settings.coffee"),o=function(e){function t(){var e,r,i;r=arguments[0],i=arguments[1],e=3<=arguments.length?f.call(arguments,2):[],this.defaultZoom=r,this.visualizer=i,this.mousewheel=l(this.mousewheel,this),t.__super__.constructor.apply(this,[this.visualizer].concat(f.call(e))),this.ctx=this.visualizer.ctx,this.canvas=this.ctx.canvas,this._scale=1,this.screenCenter=new n(this.canvas.width/2,this.canvas.height/2),this.center=new n(this.canvas.width/2,this.canvas.height/2)}return h(t,e),t.property("scale",{get:function(){return this._scale},set:function(e){return this.zoom(e,this.screenCenter)}}),t.prototype.toCellCoords=function(e){var t,n,i,o;return n=u.gridSize,t=e.subtract(this.center).divide(this.scale),i=Math.floor(t.x/(this.defaultZoom*n))*n,o=Math.floor(t.y/(this.defaultZoom*n))*n,new r(i,o,n,n)},t.prototype.getBoundingBox=function(e,t){var i,o,u,l,c,h,f,d;return null==e&&(e=this.toCellCoords(new n(0,0))),null==t&&(t=this.toCellCoords(new n(this.canvas.width,this.canvas.height))),i=e.x,c=e.y,o=t.x,h=t.y,l=a(e.left(),t.left()),u=s(e.right(),t.right()),d=a(e.top(),t.top()),f=s(e.bottom(),t.bottom()),new r(l,d,u-l,f-d)},t.prototype.transform=function(){var e;return this.ctx.translate(this.center.x,this.center.y),e=this.scale*this.defaultZoom,this.ctx.scale(e,e)},t.prototype.zoom=function(e,t){var n;return null==e&&(e=1),n=this.center.subtract(t),this.center=t.add(n.mult(e/this._scale)),this._scale=e},t.prototype.moveCenter=function(e){return this.center=this.center.add(e)},t.prototype.mousewheel=function(e){var t,n;return t=e.deltaY*e.deltaFactor,n=Math.pow(2,.001*t),this.zoom(this.scale*n,this.getPoint(e)),e.preventDefault()},t}(i),t.exports=o},{"../geom/point.coffee":3,"../geom/rect.coffee":4,"../helpers.coffee":6,"../settings.coffee":16,"./tool.coffee":23}],26:[function(e,t,n){(function(){var e,r,i,o,s,a,u,l,c,h,f,d,p,g,m,v,y,b,_,x,w,C,E,k,S,A,T,N,j,L,O,R,D,M,P,I,F,B,H;h=function(t,n,r,i){return new e(t,n,r,i)},"undefined"!=typeof t&&null!==t&&null!=t.exports&&(t.exports=h),"function"==typeof define&&define.amd?define([],function(){return h}):(M="undefined"!=typeof n&&null!==n?n:this,M.chroma=h),h.color=function(t,n,r,i){return new e(t,n,r,i)},h.hsl=function(t,n,r,i){return new e(t,n,r,i,"hsl")},h.hsv=function(t,n,r,i){return new e(t,n,r,i,"hsv")},h.rgb=function(t,n,r,i){return new e(t,n,r,i,"rgb")},h.hex=function(t){return new e(t)},h.css=function(t){return new e(t)},h.lab=function(t,n,r){return new e(t,n,r,"lab")},h.lch=function(t,n,r){return new e(t,n,r,"lch")},h.hsi=function(t,n,r){return new e(t,n,r,"hsi")},h.gl=function(t,n,r,i){return new e(255*t,255*n,255*r,i,"gl")},h.interpolate=function(t,n,r,i){return null==t||null==n?"#000":("string"===P(t)&&(t=new e(t)),"string"===P(n)&&(n=new e(n)),t.interpolate(r,n,i))},h.mix=h.interpolate,h.contrast=function(t,n){var r,i;return"string"===P(t)&&(t=new e(t)),"string"===P(n)&&(n=new e(n)),r=t.luminance(),i=n.luminance(),r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)},h.luminance=function(e){return h(e).luminance()},h._Color=e,e=function(){function e(){var e,t,n,r,i,o,s,a,u,l,c,h,d,p,g,_;for(i=this,n=[],l=0,c=arguments.length;c>l;l++)t=arguments[l],null!=t&&n.push(t);if(0===n.length)h=[255,0,255,1,"rgb"],s=h[0],a=h[1],u=h[2],e=h[3],r=h[4];else if("array"===P(n[0])){if(3===n[0].length)d=n[0],s=d[0],a=d[1],u=d[2],e=1;else{if(4!==n[0].length)throw"unknown input argument";p=n[0],s=p[0],a=p[1],u=p[2],e=p[3]}r=null!=(g=n[1])?g:"rgb"}else"string"===P(n[0])?(s=n[0],r="hex"):"object"===P(n[0])?(_=n[0]._rgb,s=_[0],a=_[1],u=_[2],e=_[3],r="rgb"):n.length>=3&&(s=n[0],a=n[1],u=n[2]);3===n.length?(r="rgb",e=1):4===n.length?"string"===P(n[3])?(r=n[3],e=1):"number"===P(n[3])&&(r="rgb",e=n[3]):5===n.length&&(e=n[3],r=n[4]),null==e&&(e=1),"rgb"===r?i._rgb=[s,a,u,e]:"gl"===r?i._rgb=[255*s,255*a,255*u,e]:"hsl"===r?(i._rgb=y(s,a,u),i._rgb[3]=e):"hsv"===r?(i._rgb=b(s,a,u),i._rgb[3]=e):"hex"===r?i._rgb=m(s):"lab"===r?(i._rgb=x(s,a,u),i._rgb[3]=e):"lch"===r?(i._rgb=E(s,a,u),i._rgb[3]=e):"hsi"===r&&(i._rgb=v(s,a,u),i._rgb[3]=e),o=f(i._rgb)}return e.prototype.rgb=function(){return this._rgb.slice(0,3)},e.prototype.rgba=function(){return this._rgb},e.prototype.hex=function(){return T(this._rgb)},e.prototype.toString=function(){return this.name()},e.prototype.hsl=function(){return j(this._rgb)},e.prototype.hsv=function(){return L(this._rgb)},e.prototype.lab=function(){return O(this._rgb)},e.prototype.lch=function(){return R(this._rgb)},e.prototype.hsi=function(){return N(this._rgb)},e.prototype.gl=function(){return[this._rgb[0]/255,this._rgb[1]/255,this._rgb[2]/255,this._rgb[3]]},e.prototype.luminance=function(){return S(this._rgb)},e.prototype.name=function(){var e,t;e=this.hex();for(t in h.colors)if(e===h.colors[t])return t;return e},e.prototype.alpha=function(e){return arguments.length?(this._rgb[3]=e,this):this._rgb[3]},e.prototype.css=function(e){var t,n,r,i;return null==e&&(e="rgb"),n=this,r=n._rgb,3===e.length&&r[3]<1&&(e+="a"),"rgb"===e?e+"("+r.slice(0,3).join(",")+")":"rgba"===e?e+"("+r.join(",")+")":"hsl"===e||"hsla"===e?(t=n.hsl(),i=function(e){return Math.round(100*e)/100},t[0]=i(t[0]),t[1]=i(100*t[1])+"%",t[2]=i(100*t[2])+"%",4===e.length&&(t[3]=r[3]),e+"("+t.join(",")+")"):void 0},e.prototype.interpolate=function(t,n,r){var i,o,s,a,u,l,c,h,f,d,p,g,m,v;if(h=this,null==r&&(r="rgb"),"string"===P(n)&&(n=new e(n)),"hsl"===r||"hsv"===r||"lch"===r||"hsi"===r)"hsl"===r?(m=h.hsl(),v=n.hsl()):"hsv"===r?(m=h.hsv(),v=n.hsv()):"hsi"===r?(m=h.hsi(),v=n.hsi()):"lch"===r&&(m=h.lch(),v=n.lch()),"h"===r.substr(0,1)?(s=m[0],p=m[1],l=m[2],a=v[0],g=v[1],c=v[2]):(l=m[0],p=m[1],s=m[2],c=v[0],g=v[1],a=v[2]),isNaN(s)||isNaN(a)?isNaN(s)?isNaN(a)?o=Number.NaN:(o=a,1!==l&&0!==l||"hsv"===r||(d=g)):(o=s,1!==c&&0!==c||"hsv"===r||(d=p)):(i=a>s&&a-s>180?a-(s+360):s>a&&s-a>180?a+360-s:a-s,o=s+t*i),null==d&&(d=p+t*(g-p)),u=l+t*(c-l),f="h"===r.substr(0,1)?new e(o,d,u,r):new e(u,d,o,r);else if("rgb"===r)m=h._rgb,v=n._rgb,f=new e(m[0]+t*(v[0]-m[0]),m[1]+t*(v[1]-m[1]),m[2]+t*(v[2]-m[2]),r);else{if("lab"!==r)throw"color mode "+r+" is not supported";m=h.lab(),v=n.lab(),f=new e(m[0]+t*(v[0]-m[0]),m[1]+t*(v[1]-m[1]),m[2]+t*(v[2]-m[2]),r)}return f.alpha(h.alpha()+t*(n.alpha()-h.alpha())),f},e.prototype.premultiply=function(){var e,t;return t=this.rgb(),e=this.alpha(),h(t[0]*e,t[1]*e,t[2]*e,e)},e.prototype.darken=function(e){var t,n;return null==e&&(e=20),n=this,t=n.lch(),t[0]-=e,h.lch(t).alpha(n.alpha())},e.prototype.darker=function(e){return this.darken(e)},e.prototype.brighten=function(e){return null==e&&(e=20),this.darken(-e)},e.prototype.brighter=function(e){return this.brighten(e)},e.prototype.saturate=function(e){var t,n;return null==e&&(e=20),n=this,t=n.lch(),t[1]+=e,h.lch(t).alpha(n.alpha())},e.prototype.desaturate=function(e){return null==e&&(e=20),this.saturate(-e)},e}(),f=function(e){var t;for(t in e)3>t?(e[t]<0&&(e[t]=0),e[t]>255&&(e[t]=255)):3===t&&(e[t]<0&&(e[t]=0),e[t]>1&&(e[t]=1));return e},g=function(e){var t,n,r,i,o,s,a,u;if(e=e.toLowerCase(),null!=h.colors&&h.colors[e])return m(h.colors[e]);if(r=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(i=r.slice(1,4),n=o=0;2>=o;n=++o)i[n]=+i[n];i[3]=1}else if(r=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(i=r.slice(1,5),n=s=0;3>=s;n=++s)i[n]=+i[n];else if(r=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(i=r.slice(1,4),n=a=0;2>=a;n=++a)i[n]=Math.round(2.55*i[n]);i[3]=1}else if(r=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(i=r.slice(1,5),n=u=0;2>=u;n=++u)i[n]=Math.round(2.55*i[n]);i[3]=+i[3]}else(r=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(t=r.slice(1,4),t[1]*=.01,t[2]*=.01,i=y(t),i[3]=1):(r=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(t=r.slice(1,4),t[1]*=.01,t[2]*=.01,i=y(t),i[3]=+r[4]);return i},m=function(e){var t,n,r,i,o,s;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return(4===e.length||7===e.length)&&(e=e.substr(1)),3===e.length&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),s=parseInt(e,16),i=s>>16,r=s>>8&255,n=255&s,[i,r,n,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return 9===e.length&&(e=e.substr(1)),s=parseInt(e,16),i=s>>24&255,r=s>>16&255,n=s>>8&255,t=255&s,[i,r,n,t];if(o=g(e))return o;throw"unknown color: "+e},v=function(e,t,n){var r,s,a,u;return u=I(arguments),e=u[0],t=u[1],n=u[2],e/=360,1/3>e?(r=(1-t)/3,a=(1+t*p(o*e)/p(i-o*e))/3,s=1-(r+a)):2/3>e?(e-=1/3,a=(1-t)/3,s=(1+t*p(o*e)/p(i-o*e))/3,r=1-(a+s)):(e-=2/3,s=(1-t)/3,r=(1+t*p(o*e)/p(i-o*e))/3,a=1-(s+r)),a=k(n*a*3),s=k(n*s*3),r=k(n*r*3),[255*a,255*s,255*r]},y=function(){var e,t,n,r,i,o,s,a,u,l,c,h,f,d;if(f=I(arguments),r=f[0],a=f[1],o=f[2],0===a)s=n=e=255*o;else{for(c=[0,0,0],t=[0,0,0],l=.5>o?o*(1+a):o+a-o*a,u=2*o-l,r/=360,c[0]=r+1/3,c[1]=r,c[2]=r-1/3,i=h=0;2>=h;i=++h)c[i]<0&&(c[i]+=1),c[i]>1&&(c[i]-=1),t[i]=6*c[i]<1?u+6*(l-u)*c[i]:2*c[i]<1?l:3*c[i]<2?u+(l-u)*(2/3-c[i])*6:u;d=[Math.round(255*t[0]),Math.round(255*t[1]),Math.round(255*t[2])],s=d[0],n=d[1],e=d[2]}return[s,n,e]},b=function(){var e,t,n,r,i,o,s,a,u,l,c,h,f,d,p,g,m,v;if(h=I(arguments),r=h[0],u=h[1],c=h[2],c*=255,0===u)a=n=e=c;else switch(360===r&&(r=0),r>360&&(r-=360),0>r&&(r+=360),r/=60,i=Math.floor(r),t=r-i,o=c*(1-u),s=c*(1-u*t),l=c*(1-u*(1-t)),i){case 0:f=[c,l,o],a=f[0],n=f[1],e=f[2];break;case 1:d=[s,c,o],a=d[0],n=d[1],e=d[2];break;case 2:p=[o,c,l],a=p[0],n=p[1],e=p[2];break;case 3:g=[o,s,c],a=g[0],n=g[1],e=g[2];break;case 4:m=[l,o,c],a=m[0],n=m[1],e=m[2];break;case 5:v=[c,o,s],a=v[0],n=v[1],e=v[2]}return a=Math.round(a),n=Math.round(n),e=Math.round(e),[a,n,e]},r=18,s=.95047,a=1,u=1.08883,_=function(){var e,t,n,r,i,o;return o=I(arguments),i=o[0],e=o[1],t=o[2],n=Math.sqrt(e*e+t*t),r=Math.atan2(t,e)/Math.PI*180,[i,n,r]},x=function(e,t,n){var r,i,o,l,c,h,f;return void 0!==e&&3===e.length&&(h=e,e=h[0],t=h[1],n=h[2]),void 0!==e&&3===e.length&&(f=e,e=f[0],t=f[1],n=f[2]),l=(e+16)/116,o=l+t/500,c=l-n/200,o=w(o)*s,l=w(l)*a,c=w(c)*u,i=B(3.2404542*o-1.5371385*l-.4985314*c),r=B(-.969266*o+1.8760108*l+.041556*c),n=B(.0556434*o-.2040259*l+1.0572252*c),[k(i,0,255),k(r,0,255),k(n,0,255),1]},w=function(e){return e>.206893034?e*e*e:(e-4/29)/7.787037},B=function(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))},C=function(){var e,t,n,r;return r=I(arguments),n=r[0],e=r[1],t=r[2],t=t*Math.PI/180,[n,Math.cos(t)*e,Math.sin(t)*e]},E=function(e,t,n){var r,i,o,s,a,u,l;return u=C(e,t,n),r=u[0],i=u[1],o=u[2],l=x(r,i,o),a=l[0],s=l[1],o=l[2],[k(a,0,255),k(s,0,255),k(o,0,255)]},S=function(e,t,n){var r;return r=I(arguments),e=r[0],t=r[1],n=r[2],e=A(e),t=A(t),n=A(n),.2126*e+.7152*t+.0722*n},A=function(e){return e/=255,.03928>=e?e/12.92:Math.pow((e+.055)/1.055,2.4)},T=function(){var e,t,n,r,i,o;return o=I(arguments),n=o[0],t=o[1],e=o[2],i=n<<16|t<<8|e,r="000000"+i.toString(16),"#"+r.substr(r.length-6)},N=function(){var e,t,n,r,i,o,s,a,u;return u=I(arguments),s=u[0],n=u[1],t=u[2],e=2*Math.PI,s/=255,n/=255,t/=255,o=Math.min(s,n,t),i=(s+n+t)/3,a=1-o/i,0===a?r=0:(r=(s-n+(s-t))/2,r/=Math.sqrt((s-n)*(s-n)+(s-t)*(n-t)),r=Math.acos(r),t>n&&(r=e-r),r/=e),[360*r,a,i]},j=function(e,t,n){var r,i,o,s,a,u;return void 0!==e&&e.length>=3&&(u=e,e=u[0],t=u[1],n=u[2]),e/=255,t/=255,n/=255,s=Math.min(e,t,n),o=Math.max(e,t,n),i=(o+s)/2,o===s?(a=0,r=Number.NaN):a=.5>i?(o-s)/(o+s):(o-s)/(2-o-s),e===o?r=(t-n)/(o-s):t===o?r=2+(n-e)/(o-s):n===o&&(r=4+(e-t)/(o-s)),r*=60,0>r&&(r+=360),[r,a,i]},L=function(){var e,t,n,r,i,o,s,a,u,l;return l=I(arguments),s=l[0],n=l[1],e=l[2],o=Math.min(s,n,e),i=Math.max(s,n,e),t=i-o,u=i/255,0===i?(r=Number.NaN,a=0):(a=t/i,s===i&&(r=(n-e)/t),n===i&&(r=2+(e-s)/t),e===i&&(r=4+(s-n)/t),r*=60,0>r&&(r+=360)),[r,a,u]},O=function(){var e,t,n,r,i,o,l;return l=I(arguments),n=l[0],t=l[1],e=l[2],n=D(n),t=D(t),e=D(e),r=F((.4124564*n+.3575761*t+.1804375*e)/s),i=F((.2126729*n+.7151522*t+.072175*e)/a),o=F((.0193339*n+.119192*t+.9503041*e)/u),[116*i-16,500*(r-i),200*(i-o)]},D=function(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},F=function(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29},R=function(){var e,t,n,r,i,o,s;return o=I(arguments),i=o[0],n=o[1],t=o[2],s=O(i,n,t),r=s[0],e=s[1],t=s[2],_(r,e,t)},h.scale=function(e,t){var n,r,i,o,s,a,u,l,c,f,d,p,g,m,v,y,b,_,x,w,C;return y="rgb",b=h("#ccc"),C=0,g=!1,p=[0,1],f=[],x=!1,w=[],v=0,m=1,d=!1,_=0,c={},a=function(e,t){var n,r,i,o,a,u,l;if(null==e&&(e=["#ddd","#222"]),null!=e&&"string"===P(e)&&null!=(null!=(a=h.brewer)?a[e]:void 0)&&(e=h.brewer[e]),"array"===P(e)){for(e=e.slice(0),n=i=0,u=e.length-1;u>=0?u>=i:i>=u;n=u>=0?++i:--i)r=e[n],"string"===P(r)&&(e[n]=h(r));if(null!=t)w=t;else for(w=[],n=o=0,l=e.length-1;l>=0?l>=o:o>=l;n=l>=0?++o:--o)w.push(n/(e.length-1))}return s(),f=e},u=function(e){return null==e&&(e=[]),p=e,v=e[0],m=e[e.length-1],s(),_=2===e.length?0:e.length-1},i=function(e){var t,n;if(null!=p){for(n=p.length-1,t=0;n>t&&e>=p[t];)t++;return t-1}return 0},l=function(e){return e},n=function(e){var t,n,r,o,s;return s=e,p.length>2&&(o=p.length-1,t=i(e),r=p[0]+(p[1]-p[0])*(0+.5*C),n=p[o-1]+(p[o]-p[o-1])*(1-.5*C),s=v+(p[t]+.5*(p[t+1]-p[t])-r)/(n-r)*(m-v)),s},o=function(e,t){var n,r,o,s,a,u,d,g,x;if(null==t&&(t=!1),isNaN(e))return b;if(t?d=e:p.length>2?(n=i(e),d=n/(_-1)):(d=o=(e-v)/(m-v),d=Math.min(1,Math.max(0,d))),t||(d=l(d)),a=Math.floor(1e4*d),c[a])r=c[a];else{if("array"===P(f))for(s=g=0,x=w.length-1;x>=0?x>=g:g>=x;s=x>=0?++g:--g){if(u=w[s],u>=d){r=f[s];break}if(d>=u&&s===w.length-1){r=f[s];break}if(d>u&&d<w[s+1]){d=(d-u)/(w[s+1]-u),r=h.interpolate(f[s],f[s+1],d,y);break}}else"function"===P(f)&&(r=f(d));c[a]=r}return r},s=function(){return c={}},a(e,t),r=function(e){var t;return t=o(e),x&&t[x]?t[x]():t},r.domain=function(e,t,n,i){var o;return null==n&&(n="e"),arguments.length?(null!=t&&(o=h.analyze(e,i),e=0===t?[o.min,o.max]:h.limits(o,n,t)),u(e),r):p},r.mode=function(e){return arguments.length?(y=e,s(),r):y},r.range=function(e,t){return a(e,t),r},r.out=function(e){return x=e,r},r.spread=function(e){return arguments.length?(C=e,r):C},r.correctLightness=function(e){return arguments.length?(d=e,s(),l=d?function(e){var t,n,r,i,s,a,u,l,c;for(t=o(0,!0).lab()[0],n=o(1,!0).lab()[0],u=t>n,r=o(e,!0).lab()[0],s=t+(n-t)*e,i=r-s,l=0,c=1,a=20;Math.abs(i)>.01&&a-->0;)!function(){return u&&(i*=-1),0>i?(l=e,e+=.5*(c-e)):(c=e,e+=.5*(l-e)),r=o(e,!0).lab()[0],i=r-s}();return e}:function(e){return e},r):d},r.colors=function(t){var n,i,o,s,a,u;if(null==t&&(t="hex"),e=[],i=[],p.length>2)for(n=o=1,u=p.length;u>=1?u>o:o>u;n=u>=1?++o:--o)i.push(.5*(p[n-1]+p[n]));else i=p;for(s=0,a=i.length;a>s;s++)n=i[s],e.push(r(n)[t]());return e},r},null==(H=h.scales)&&(h.scales={}),h.scales.cool=function(){return h.scale([h.hsl(180,1,.9),h.hsl(250,.7,.4)])},h.scales.hot=function(){return h.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},h.analyze=function(e,t,n){var r,i,o,s,a,u,l;if(o={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==n&&(n=function(){return!0}),r=function(e){null==e||isNaN(e)||(o.values.push(e),o.sum+=e,e<o.min&&(o.min=e),e>o.max&&(o.max=e),o.count+=1)},a=function(e,i){return n(e,i)?null!=t&&"function"===P(t)?r(t(e)):null!=t&&"string"===P(t)||"number"===P(t)?r(e[t]):r(e):void 0},"array"===P(e))for(u=0,l=e.length;l>u;u++)s=e[u],a(s);else for(i in e)s=e[i],a(s,i);return o.domain=[o.min,o.max],o.limits=function(e,t){return h.limits(o,e,t)},o},h.limits=function(e,t,n){var r,i,o,s,a,u,l,c,f,d,p,g,m,v,y,b,_,x,w,C,E,k,S,A,T,N,j,L,O,R,D,M,P,I,F,B,H,q,z,V,W,G,X,U,$,Y,Q,J,K,Z,et,tt,nt,rt,it,ot;if(null==t&&(t="equal"),null==n&&(n=7),null==e.values&&(e=h.analyze(e)),m=e.min,p=e.max,S=e.sum,N=e.values.sort(function(e,t){return e-t}),d=[],"c"===t.substr(0,1)&&(d.push(m),d.push(p)),"e"===t.substr(0,1)){for(d.push(m),l=j=1,H=n-1;H>=1?H>=j:j>=H;l=H>=1?++j:--j)d.push(m+l/n*(p-m));d.push(p)}else if("l"===t.substr(0,1)){if(0>=m)throw"Logarithmic scales are only possible for values > 0";for(v=Math.LOG10E*Math.log(m),g=Math.LOG10E*Math.log(p),d.push(m),l=L=1,U=n-1;U>=1?U>=L:L>=U;l=U>=1?++L:--L)d.push(Math.pow(10,v+l/n*(g-v)));d.push(p)}else if("q"===t.substr(0,1)){for(d.push(m),l=O=1,$=n-1;$>=1?$>=O:O>=$;l=$>=1?++O:--O)w=N.length*l/n,C=Math.floor(w),C===w?d.push(N[C]):(E=w-C,d.push(N[C]*E+N[C+1]*(1-E)));d.push(p)}else if("k"===t.substr(0,1)){for(b=N.length,r=new Array(b),a=new Array(n),k=!0,_=0,o=null,o=[],o.push(m),l=R=1,Y=n-1;Y>=1?Y>=R:R>=Y;l=Y>=1?++R:--R)o.push(m+l/n*(p-m));for(o.push(p);k;){for(c=D=0,Q=n-1;Q>=0?Q>=D:D>=Q;c=Q>=0?++D:--D)a[c]=0;for(l=M=0,J=b-1;J>=0?J>=M:M>=J;l=J>=0?++M:--M){for(T=N[l],y=Number.MAX_VALUE,c=P=0,K=n-1;K>=0?K>=P:P>=K;c=K>=0?++P:--P)u=Math.abs(o[c]-T),y>u&&(y=u,i=c);a[i]++,r[l]=i}for(x=new Array(n),c=I=0,Z=n-1;Z>=0?Z>=I:I>=Z;c=Z>=0?++I:--I)x[c]=null;for(l=F=0,et=b-1;et>=0?et>=F:F>=et;l=et>=0?++F:--F)s=r[l],null===x[s]?x[s]=N[l]:x[s]+=N[l];for(c=B=0,q=n-1;q>=0?q>=B:B>=q;c=q>=0?++B:--B)x[c]*=1/a[c];for(k=!1,c=tt=0,z=n-1;z>=0?z>=tt:tt>=z;c=z>=0?++tt:--tt)if(x[c]!==o[l]){k=!0;break}o=x,_++,_>200&&(k=!1)}for(f={},c=nt=0,V=n-1;V>=0?V>=nt:nt>=V;c=V>=0?++nt:--nt)f[c]=[];for(l=rt=0,W=b-1;W>=0?W>=rt:rt>=W;l=W>=0?++rt:--rt)s=r[l],f[s].push(N[l]);for(A=[],c=it=0,G=n-1;G>=0?G>=it:it>=G;c=G>=0?++it:--it)A.push(f[c][0]),A.push(f[c][f[c].length-1]);for(A=A.sort(function(e,t){return e-t}),d.push(A[0]),l=ot=1,X=A.length-1;X>=ot;l=ot+=2)isNaN(A[l])||d.push(A[l])}return d},h.brewer=c={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},h.colors=d={indigo:"#4b0082",gold:"#ffd700",hotpink:"#ff69b4",firebrick:"#b22222",indianred:"#cd5c5c",yellow:"#ffff00",mistyrose:"#ffe4e1",darkolivegreen:"#556b2f",olive:"#808000",darkseagreen:"#8fbc8f",pink:"#ffc0cb",tomato:"#ff6347",lightcoral:"#f08080",orangered:"#ff4500",navajowhite:"#ffdead",lime:"#00ff00",palegreen:"#98fb98",darkslategrey:"#2f4f4f",greenyellow:"#adff2f",burlywood:"#deb887",seashell:"#fff5ee",mediumspringgreen:"#00fa9a",fuchsia:"#ff00ff",papayawhip:"#ffefd5",blanchedalmond:"#ffebcd",chartreuse:"#7fff00",dimgray:"#696969",black:"#000000",peachpuff:"#ffdab9",springgreen:"#00ff7f",aquamarine:"#7fffd4",white:"#ffffff",orange:"#ffa500",lightsalmon:"#ffa07a",darkslategray:"#2f4f4f",brown:"#a52a2a",ivory:"#fffff0",dodgerblue:"#1e90ff",peru:"#cd853f",lawngreen:"#7cfc00",chocolate:"#d2691e",crimson:"#dc143c",forestgreen:"#228b22",darkgrey:"#a9a9a9",lightseagreen:"#20b2aa",cyan:"#00ffff",mintcream:"#f5fffa",silver:"#c0c0c0",antiquewhite:"#faebd7",mediumorchid:"#ba55d3",skyblue:"#87ceeb",gray:"#808080",darkturquoise:"#00ced1",goldenrod:"#daa520",darkgreen:"#006400",floralwhite:"#fffaf0",darkviolet:"#9400d3",darkgray:"#a9a9a9",moccasin:"#ffe4b5",saddlebrown:"#8b4513",grey:"#808080",darkslateblue:"#483d8b",lightskyblue:"#87cefa",lightpink:"#ffb6c1",mediumvioletred:"#c71585",slategrey:"#708090",red:"#ff0000",deeppink:"#ff1493",limegreen:"#32cd32",darkmagenta:"#8b008b",palegoldenrod:"#eee8aa",plum:"#dda0dd",turquoise:"#40e0d0",lightgrey:"#d3d3d3",lightgoldenrodyellow:"#fafad2",darkgoldenrod:"#b8860b",lavender:"#e6e6fa",maroon:"#800000",yellowgreen:"#9acd32",sandybrown:"#f4a460",thistle:"#d8bfd8",violet:"#ee82ee",navy:"#000080",magenta:"#ff00ff",dimgrey:"#696969",tan:"#d2b48c",rosybrown:"#bc8f8f",olivedrab:"#6b8e23",blue:"#0000ff",lightblue:"#add8e6",ghostwhite:"#f8f8ff",honeydew:"#f0fff0",cornflowerblue:"#6495ed",slateblue:"#6a5acd",linen:"#faf0e6",darkblue:"#00008b",powderblue:"#b0e0e6",seagreen:"#2e8b57",darkkhaki:"#bdb76b",snow:"#fffafa",sienna:"#a0522d",mediumblue:"#0000cd",royalblue:"#4169e1",lightcyan:"#e0ffff",green:"#008000",mediumpurple:"#9370db",midnightblue:"#191970",cornsilk:"#fff8dc",paleturquoise:"#afeeee",bisque:"#ffe4c4",slategray:"#708090",darkcyan:"#008b8b",khaki:"#f0e68c",wheat:"#f5deb3",teal:"#008080",darkorchid:"#9932cc",deepskyblue:"#00bfff",salmon:"#fa8072",darkred:"#8b0000",steelblue:"#4682b4",palevioletred:"#db7093",lightslategray:"#778899",aliceblue:"#f0f8ff",lightslategrey:"#778899",lightgreen:"#90ee90",orchid:"#da70d6",gainsboro:"#dcdcdc",mediumseagreen:"#3cb371",lightgray:"#d3d3d3",mediumturquoise:"#48d1cc",lemonchiffon:"#fffacd",cadetblue:"#5f9ea0",lightyellow:"#ffffe0",lavenderblush:"#fff0f5",coral:"#ff7f50",purple:"#800080",aqua:"#00ffff",whitesmoke:"#f5f5f5",mediumslateblue:"#7b68ee",darkorange:"#ff8c00",mediumaquamarine:"#66cdaa",darksalmon:"#e9967a",beige:"#f5f5dc",blueviolet:"#8a2be2",azure:"#f0ffff",lightsteelblue:"#b0c4de",oldlace:"#fdf5e6"},P=function(){var e,t,n,r,i;
for(e={},i="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),n=0,r=i.length;r>n;n++)t=i[n],e["[object "+t+"]"]=t.toLowerCase();return function(t){var n;return n=Object.prototype.toString.call(t),e[n]||"object"}}(),k=function(e,t,n){return null==t&&(t=0),null==n&&(n=1),t>e&&(e=t),e>n&&(e=n),e},I=function(e){return e.length>=3?e:e[0]},o=2*Math.PI,i=Math.PI/3,p=Math.cos,l=function(e){var t,n,r,i,o,s,a,u,c,f,d;return e=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)i=e[t],r.push(h(i));return r}(),2===e.length?(c=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)i=e[t],r.push(i.lab());return r}(),o=c[0],s=c[1],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;2>=n;t=++n)r.push(o[t]+e*(s[t]-o[t]));return r}(),h.lab.apply(h,n)}):3===e.length?(f=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)i=e[t],r.push(i.lab());return r}(),o=f[0],s=f[1],a=f[2],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;2>=n;t=++n)r.push((1-e)*(1-e)*o[t]+2*(1-e)*e*s[t]+e*e*a[t]);return r}(),h.lab.apply(h,n)}):4===e.length?(d=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)i=e[t],r.push(i.lab());return r}(),o=d[0],s=d[1],a=d[2],u=d[3],t=function(e){var t,n;return n=function(){var n,r;for(r=[],t=n=0;2>=n;t=++n)r.push((1-e)*(1-e)*(1-e)*o[t]+3*(1-e)*(1-e)*e*s[t]+3*(1-e)*e*e*a[t]+e*e*e*u[t]);return r}(),h.lab.apply(h,n)}):5===e.length&&(n=l(e.slice(0,3)),r=l(e.slice(2,5)),t=function(e){return.5>e?n(2*e):r(2*(e-.5))}),t},h.interpolate.bezier=l}).call(this)},{}],27:[function(e,t){t.exports=e("./vendor/dat.gui"),t.exports.color=e("./vendor/dat.color")},{"./vendor/dat.color":28,"./vendor/dat.gui":29}],28:[function(e,t){var n=t.exports=n||{};n.color=n.color||{},n.utils=n.utils||{},n.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(t[n])||(e[n]=t[n])},this),e},defaults:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(e[n])&&(e[n]=t[n])},this),e},compose:function(){var e=t.call(arguments);return function(){for(var n=t.call(arguments),r=e.length-1;r>=0;r--)n=[e[r].apply(this,n)];return n[0]}},each:function(t,n,r){if(e&&t.forEach===e)t.forEach(n,r);else if(t.length===t.length+0){for(var i=0,o=t.length;o>i;i++)if(i in t&&n.call(r,t[i],i)===this.BREAK)return}else for(var i in t)if(n.call(r,t[i],i)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():t.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!==e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}}(),n.color.toString=function(e){return function(t){if(1==t.a||e.isUndefined(t.a)){for(var n=t.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}}(n.utils.common),n.Color=n.color.Color=function(e,t,n,r){function i(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(s(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(s(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function o(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(a(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[t]=e}})}function s(e,n,i){if("HEX"===e.__state.space)e.__state[n]=t.component_from_hex(e.__state.hex,i);else{if("HSV"!==e.__state.space)throw"Corrupted color state";r.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function a(e){var n=t.rgb_to_hsv(e.r,e.g,e.b);r.extend(e.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=n.h}var u=function(){if(this.__state=e.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return u.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(u.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),i(u.prototype,"r",2),i(u.prototype,"g",1),i(u.prototype,"b",0),o(u.prototype,"h"),o(u.prototype,"s"),o(u.prototype,"v"),Object.defineProperty(u.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(u.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),u}(n.color.interpret=function(e,t){var n,r,i=function(){r=!1;var e=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(o,function(i){return i.litmus(e)?(t.each(i.conversions,function(i,o){return n=i.read(e),r===!1&&n!==!1?(r=n,n.conversionName=o,n.conversion=i,t.BREAK):void 0}),t.BREAK):void 0}),r},o=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null===t?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null===t?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString())}},write:e},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null===t?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:e},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null===t?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3!=e.length?!1:{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4!=e.length?!1:{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a)?{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)?{space:"RGB",r:e.r,g:e.g,b:e.b}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a)?{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)?{space:"HSV",h:e.h,s:e.s,v:e.v}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return i}(n.color.toString,n.utils.common),n.color.math=function(){var e;return{hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),o=n*(1-t),s=n*(1-i*t),a=n*(1-(1-i)*t),u=[[n,a,o],[s,n,o],[o,n,a],[o,s,n],[a,o,n],[n,o,s]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(e,t,n){var r,i,o=Math.min(e,t,n),s=Math.max(e,t,n),a=s-o;return 0==s?{h:0/0,s:0,v:0}:(i=a/s,r=e==s?(t-n)/a:t==s?2+(n-e)/a:4+(e-t)/a,r/=6,0>r&&(r+=1),{h:360*r,s:i,v:s/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(t,n,r){return r<<(e=8*n)|t&~(255<<e)}}}(),n.color.toString,n.utils.common)},{}],29:[function(e,t){var n=t.exports=n||{};n.gui=n.gui||{},n.utils=n.utils||{},n.controllers=n.controllers||{},n.dom=n.dom||{},n.color=n.color||{},n.utils.css=function(){return{load:function(e,t){t=t||document;var n=t.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,t.getElementsByTagName("head")[0].appendChild(n)},inject:function(e,t){t=t||document;var n=document.createElement("style");n.type="text/css",n.innerHTML=e,t.getElementsByTagName("head")[0].appendChild(n)}}}(),n.utils.common=function(){var e=Array.prototype.forEach,t=Array.prototype.slice;return{BREAK:{},extend:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(t[n])||(e[n]=t[n])},this),e},defaults:function(e){return this.each(t.call(arguments,1),function(t){for(var n in t)this.isUndefined(e[n])&&(e[n]=t[n])},this),e},compose:function(){var e=t.call(arguments);return function(){for(var n=t.call(arguments),r=e.length-1;r>=0;r--)n=[e[r].apply(this,n)];return n[0]}},each:function(t,n,r){if(e&&t.forEach===e)t.forEach(n,r);else if(t.length===t.length+0){for(var i=0,o=t.length;o>i;i++)if(i in t&&n.call(r,t[i],i)===this.BREAK)return}else for(var i in t)if(n.call(r,t[i],i)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():t.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){return e!==e},isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}}}(),n.controllers.Controller=function(e){var t=function(e,t){this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0};return e.extend(t.prototype,{onChange:function(e){return this.__onChange=e,this},onFinishChange:function(e){return this.__onFinishChange=e,this},setValue:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},getValue:function(){return this.object[this.property]},updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}}),t}(n.utils.common),n.dom.dom=function(e){function t(t){if("0"===t||e.isUndefined(t))return 0;var n=t.match(i);return e.isNull(n)?0:parseFloat(n[1])}var n={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},r={};e.each(n,function(t,n){e.each(t,function(e){r[e]=n})});var i=/(\d+(\.\d+)?)px/,o={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(t,n,r){e.isUndefined(n)&&(n=!0),e.isUndefined(r)&&(r=!0),t.style.position="absolute",n&&(t.style.left=0,t.style.right=0),r&&(t.style.top=0,t.style.bottom=0)},fakeEvent:function(t,n,i,o){i=i||{};var s=r[n];if(!s)throw new Error("Event type "+n+" not supported.");var a=document.createEvent(s);switch(s){case"MouseEvents":var u=i.x||i.clientX||0,l=i.y||i.clientY||0;a.initMouseEvent(n,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,u,l,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=a.initKeyboardEvent||a.initKeyEvent;e.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(n,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(n,i.bubbles||!1,i.cancelable||!0)}e.defaults(a,o),t.dispatchEvent(a)},bind:function(e,t,n,r){return r=r||!1,e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n),o},unbind:function(e,t,n,r){return r=r||!1,e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n),o},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1==n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return o},removeClass:function(e,t){if(t)if(void 0===e.className);else if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!=r&&(n.splice(r,1),e.className=n.join(" "))}else e.className=void 0;return o},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var n=getComputedStyle(e);return t(n["border-left-width"])+t(n["border-right-width"])+t(n["padding-left"])+t(n["padding-right"])+t(n.width)},getHeight:function(e){var n=getComputedStyle(e);return t(n["border-top-width"])+t(n["border-bottom-width"])+t(n["padding-top"])+t(n["padding-bottom"])+t(n.height)},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent)do t.left+=e.offsetLeft,t.top+=e.offsetTop;while(e=e.offsetParent);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};return o}(n.utils.common),n.controllers.OptionController=function(e,t,n){var r=function(e,i,o){r.superclass.call(this,e,i);var s=this;if(this.__select=document.createElement("select"),n.isArray(o)){var a={};n.each(o,function(e){a[e]=e}),o=a}n.each(o,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),s.__select.appendChild(n)}),this.updateDisplay(),t.bind(this.__select,"change",function(){var e=this.options[this.selectedIndex].value;s.setValue(e)}),this.domElement.appendChild(this.__select)};return r.superclass=e,n.extend(r.prototype,e.prototype,{setValue:function(e){var t=r.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),t},updateDisplay:function(){return this.__select.value=this.getValue(),r.superclass.prototype.updateDisplay.call(this)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.NumberController=function(e,t){function n(e){return e=e.toString(),e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var r=function(e,i,o){r.superclass.call(this,e,i),o=o||{},this.__min=o.min,this.__max=o.max,this.__step=o.step,this.__impliedStep=t.isUndefined(this.__step)?0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(this.initialValue)/Math.LN10))/10:this.__step,this.__precision=n(this.__impliedStep)};return r.superclass=e,t.extend(r.prototype,e.prototype,{setValue:function(e){return void 0!==this.__min&&e<this.__min?e=this.__min:void 0!==this.__max&&e>this.__max&&(e=this.__max),void 0!==this.__step&&e%this.__step!=0&&(e=Math.round(e/this.__step)*this.__step),r.superclass.prototype.setValue.call(this,e)},min:function(e){return this.__min=e,this},max:function(e){return this.__max=e,this},step:function(e){return this.__step=e,this}}),r}(n.controllers.Controller,n.utils.common),n.controllers.NumberControllerBox=function(e,t,n){function r(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}var i=function(e,r,o){function s(){var e=parseFloat(f.__input.value);n.isNaN(e)||f.setValue(e)}function a(){s(),f.__onFinishChange&&f.__onFinishChange.call(f,f.getValue())}function u(e){t.bind(window,"mousemove",l),t.bind(window,"mouseup",c),h=e.clientY}function l(e){var t=h-e.clientY;f.setValue(f.getValue()+t*f.__impliedStep),h=e.clientY}function c(){t.unbind(window,"mousemove",l),t.unbind(window,"mouseup",c)}this.__truncationSuspended=!1,i.superclass.call(this,e,r,o);var h,f=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"change",s),t.bind(this.__input,"blur",a),t.bind(this.__input,"mousedown",u),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&(f.__truncationSuspended=!0,this.blur(),f.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return i.superclass=e,n.extend(i.prototype,e.prototype,{updateDisplay:function(){return this.__input.value=this.__truncationSuspended?this.getValue():r(this.getValue(),this.__precision),i.superclass.prototype.updateDisplay.call(this)}}),i}(n.controllers.NumberController,n.dom.dom,n.utils.common),n.controllers.NumberControllerSlider=function(e,t,n,r,i){function o(e,t,n,r,i){return r+(i-r)*((e-t)/(n-t))}var s=function(e,n,r,i,a){function u(e){t.bind(window,"mousemove",l),t.bind(window,"mouseup",c),l(e)}function l(e){e.preventDefault();var n=t.getOffset(h.__background),r=t.getWidth(h.__background);return h.setValue(o(e.clientX,n.left,n.left+r,h.__min,h.__max)),!1}function c(){t.unbind(window,"mousemove",l),t.unbind(window,"mouseup",c),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}s.superclass.call(this,e,n,{min:r,max:i,step:a});var h=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),t.bind(this.__background,"mousedown",u),t.addClass(this.__background,"slider"),t.addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background)};return s.superclass=e,s.useDefaultStyles=function(){n.inject(i)},r.extend(s.prototype,e.prototype,{updateDisplay:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",s.superclass.prototype.updateDisplay.call(this)}}),s}(n.controllers.NumberController,n.dom.dom,n.utils.css,n.utils.common,".slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"),n.controllers.FunctionController=function(e,t,n){var r=function(e,n,i){r.superclass.call(this,e,n);var o=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===i?"Fire":i,t.bind(this.__button,"click",function(e){return e.preventDefault(),o.fire(),!1}),t.addClass(this.__button,"button"),this.domElement.appendChild(this.__button)};return r.superclass=e,n.extend(r.prototype,e.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.getValue().call(this.object)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.BooleanController=function(e,t,n){var r=function(e,n){function i(){o.setValue(!o.__prev)}r.superclass.call(this,e,n);var o=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),t.bind(this.__checkbox,"change",i,!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()};return r.superclass=e,n.extend(r.prototype,e.prototype,{setValue:function(e){var t=r.superclass.prototype.setValue.call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),t},updateDisplay:function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,r.superclass.prototype.updateDisplay.call(this)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.color.toString=function(e){return function(t){if(1==t.a||e.isUndefined(t.a)){for(var n=t.hex.toString(16);n.length<6;)n="0"+n;return"#"+n}return"rgba("+Math.round(t.r)+","+Math.round(t.g)+","+Math.round(t.b)+","+t.a+")"}}(n.utils.common),n.color.interpret=function(e,t){var n,r,i=function(){r=!1;var e=arguments.length>1?t.toArray(arguments):arguments[0];return t.each(o,function(i){return i.litmus(e)?(t.each(i.conversions,function(i,o){return n=i.read(e),r===!1&&n!==!1?(r=n,n.conversionName=o,n.conversion=i,t.BREAK):void 0}),t.BREAK):void 0}),r},o=[{litmus:t.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null===t?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString())}},write:e},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null===t?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString())}},write:e},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null===t?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:e},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null===t?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:e}}},{litmus:t.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:t.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3!=e.length?!1:{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4!=e.length?!1:{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:t.isObject,conversions:{RGBA_OBJ:{read:function(e){return t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)&&t.isNumber(e.a)?{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return t.isNumber(e.r)&&t.isNumber(e.g)&&t.isNumber(e.b)?{space:"RGB",r:e.r,g:e.g,b:e.b}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)&&t.isNumber(e.a)?{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return t.isNumber(e.h)&&t.isNumber(e.s)&&t.isNumber(e.v)?{space:"HSV",h:e.h,s:e.s,v:e.v}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}];return i}(n.color.toString,n.utils.common),n.GUI=n.gui.GUI=function(e,t,n,r,i,o,s,a,u,l,c,h,f,d,p){function g(e,t,n,o){if(void 0===t[n])throw new Error("Object "+t+' has no property "'+n+'"');var s;if(o.color)s=new c(t,n);else{var a=[t,n].concat(o.factoryArgs);s=r.apply(e,a)}o.before instanceof i&&(o.before=o.before.__li),y(e,s),d.addClass(s.domElement,"c");var u=document.createElement("span");d.addClass(u,"property-name"),u.innerHTML=s.property;var l=document.createElement("div");l.appendChild(u),l.appendChild(s.domElement);var h=m(e,l,o.before);return d.addClass(h,F.CLASS_CONTROLLER_ROW),d.addClass(h,typeof s.getValue()),v(e,h,s),e.__controllers.push(s),s}function m(e,t,n){var r=document.createElement("li");return t&&r.appendChild(t),n?e.__ul.insertBefore(r,params.before):e.__ul.appendChild(r),e.onResize(),r}function v(e,t,n){if(n.__li=t,n.__gui=e,p.extend(n,{options:function(t){return arguments.length>1?(n.remove(),g(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[p.toArray(arguments)]})):p.isArray(t)||p.isObject(t)?(n.remove(),g(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[t]})):void 0},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof u){var r=new a(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});p.each(["updateDisplay","onChange","onFinishChange"],function(e){var t=n[e],i=r[e];n[e]=r[e]=function(){var e=Array.prototype.slice.call(arguments);return t.apply(n,e),i.apply(r,e)}}),d.addClass(t,"has-slider"),n.domElement.insertBefore(r.domElement,n.domElement.firstElementChild)}else if(n instanceof a){var i=function(t){return p.isNumber(n.__min)&&p.isNumber(n.__max)?(n.remove(),g(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):t};n.min=p.compose(i,n.min),n.max=p.compose(i,n.max)}else n instanceof o?(d.bind(t,"click",function(){d.fakeEvent(n.__checkbox,"click")}),d.bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof s?(d.bind(t,"click",function(){d.fakeEvent(n.__button,"click")}),d.bind(t,"mouseover",function(){d.addClass(n.__button,"hover")}),d.bind(t,"mouseout",function(){d.removeClass(n.__button,"hover")})):n instanceof c&&(d.addClass(t,"color"),n.updateDisplay=p.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=p.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&S(e.getRoot(),!0),t},n.setValue)}function y(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!=r){var i=n.__rememberedObjectIndecesToControllers[r];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[r]=i),i[t.property]=t,n.load&&n.load.remembered){var o,s=n.load.remembered;if(s[e.preset])o=s[e.preset];else{if(!s[R])return;o=s[R]}if(o[r]&&void 0!==o[r][t.property]){var a=o[r][t.property];t.initialValue=a,t.setValue(a)}}}}function b(e,t){return document.location.href+"."+t}function _(e){function t(){l.style.display=e.useLocalStorage?"block":"none"}var n=e.__save_row=document.createElement("li");d.addClass(e.domElement,"has-save"),e.__ul.insertBefore(n,e.__ul.firstChild),d.addClass(n,"save-row");var r=document.createElement("span");r.innerHTML="&nbsp;",d.addClass(r,"button gears");var i=document.createElement("span");i.innerHTML="Save",d.addClass(i,"button"),d.addClass(i,"save");var o=document.createElement("span");o.innerHTML="New",d.addClass(o,"button"),d.addClass(o,"save-as");var s=document.createElement("span");s.innerHTML="Revert",d.addClass(s,"button"),d.addClass(s,"revert");var a=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?p.each(e.load.remembered,function(t,n){E(e,n,n==e.preset)}):E(e,R,!1),d.bind(a,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),n.appendChild(a),n.appendChild(r),n.appendChild(i),n.appendChild(o),n.appendChild(s),D){var u=document.getElementById("dg-save-locally"),l=document.getElementById("dg-local-explain");u.style.display="block";var c=document.getElementById("dg-local-storage");"true"===localStorage.getItem(b(e,"isLocal"))&&c.setAttribute("checked","checked"),t(),d.bind(c,"change",function(){e.useLocalStorage=!e.useLocalStorage,t()})}var h=document.getElementById("dg-new-constructor");d.bind(h,"keydown",function(e){!e.metaKey||67!==e.which&&67!=e.keyCode||T.hide()}),d.bind(r,"click",function(){h.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),T.show(),h.focus(),h.select()}),d.bind(i,"click",function(){e.save()}),d.bind(o,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),d.bind(s,"click",function(){e.revert()})}function x(e){function t(t){return t.preventDefault(),i=t.clientX,d.addClass(e.__closeButton,F.CLASS_DRAG),d.bind(window,"mousemove",n),d.bind(window,"mouseup",r),!1}function n(t){return t.preventDefault(),e.width+=i-t.clientX,e.onResize(),i=t.clientX,!1}function r(){d.removeClass(e.__closeButton,F.CLASS_DRAG),d.unbind(window,"mousemove",n),d.unbind(window,"mouseup",r)}e.__resize_handle=document.createElement("div"),p.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var i;d.bind(e.__resize_handle,"mousedown",t),d.bind(e.__closeButton,"mousedown",t),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function w(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function C(e,t){var n={};return p.each(e.__rememberedObjects,function(r,i){var o={},s=e.__rememberedObjectIndecesToControllers[i];p.each(s,function(e,n){o[n]=t?e.initialValue:e.getValue()}),n[i]=o}),n}function E(e,t,n){var r=document.createElement("option");r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function k(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value==e.preset&&(e.__preset_select.selectedIndex=t)}function S(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function A(e){0!=e.length&&h(function(){A(e)}),p.each(e,function(e){e.updateDisplay()})}e.inject(n);var T,N,j="dg",L=72,O=20,R="Default",D=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}(),M=!0,P=!1,I=[],F=function(e){function t(){localStorage.setItem(b(r,"gui"),JSON.stringify(r.getSaveObject()))}function n(){var e=r.getRoot();e.width+=1,p.defer(function(){e.width-=1})}var r=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),d.addClass(this.domElement,j),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],e=e||{},e=p.defaults(e,{autoPlace:!0,width:F.DEFAULT_WIDTH}),e=p.defaults(e,{resizable:e.autoPlace,hideable:e.autoPlace}),p.isUndefined(e.load)?e.load={preset:R}:e.preset&&(e.load.preset=e.preset),p.isUndefined(e.parent)&&e.hideable&&I.push(this),e.resizable=p.isUndefined(e.parent)&&e.resizable,e.autoPlace&&p.isUndefined(e.scrollable)&&(e.scrollable=!0);var i=D&&"true"===localStorage.getItem(b(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return e.parent}},scrollable:{get:function(){return e.scrollable}},autoPlace:{get:function(){return e.autoPlace}},preset:{get:function(){return r.parent?r.getRoot().preset:e.load.preset},set:function(t){r.parent?r.getRoot().preset=t:e.load.preset=t,k(this),r.revert()}},width:{get:function(){return e.width},set:function(t){e.width=t,w(r,t)}},name:{get:function(){return e.name},set:function(t){e.name=t,s&&(s.innerHTML=e.name)}},closed:{get:function(){return e.closed},set:function(t){e.closed=t,e.closed?d.addClass(r.__ul,F.CLASS_CLOSED):d.removeClass(r.__ul,F.CLASS_CLOSED),this.onResize(),r.__closeButton&&(r.__closeButton.innerHTML=t?F.TEXT_OPEN:F.TEXT_CLOSED)}},load:{get:function(){return e.load}},useLocalStorage:{get:function(){return i},set:function(e){D&&(i=e,e?d.bind(window,"unload",t):d.unbind(window,"unload",t),localStorage.setItem(b(r,"isLocal"),e))}}}),p.isUndefined(e.parent)){if(e.closed=!1,d.addClass(this.domElement,F.CLASS_MAIN),d.makeSelectable(this.domElement,!1),D&&i){r.useLocalStorage=!0;var o=localStorage.getItem(b(this,"gui"));o&&(e.load=JSON.parse(o))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=F.TEXT_CLOSED,d.addClass(this.__closeButton,F.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),d.bind(this.__closeButton,"click",function(){r.closed=!r.closed})}else{void 0===e.closed&&(e.closed=!0);var s=document.createTextNode(e.name);d.addClass(s,"controller-name");var a=m(r,s),u=function(e){return e.preventDefault(),r.closed=!r.closed,!1};d.addClass(this.__ul,F.CLASS_CLOSED),d.addClass(a,"title"),d.bind(a,"click",u),e.closed||(this.closed=!1)}e.autoPlace&&(p.isUndefined(e.parent)&&(M&&(N=document.createElement("div"),d.addClass(N,j),d.addClass(N,F.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(N),M=!1),N.appendChild(this.domElement),d.addClass(this.domElement,F.CLASS_AUTO_PLACE)),this.parent||w(r,e.width)),d.bind(window,"resize",function(){r.onResize()}),d.bind(this.__ul,"webkitTransitionEnd",function(){r.onResize()}),d.bind(this.__ul,"transitionend",function(){r.onResize()}),d.bind(this.__ul,"oTransitionEnd",function(){r.onResize()}),this.onResize(),e.resizable&&x(this);r.getRoot();e.parent||n()};return F.toggleHide=function(){P=!P,p.each(I,function(e){e.domElement.style.zIndex=P?-999:999,e.domElement.style.opacity=P?0:1
})},F.CLASS_AUTO_PLACE="a",F.CLASS_AUTO_PLACE_CONTAINER="ac",F.CLASS_MAIN="main",F.CLASS_CONTROLLER_ROW="cr",F.CLASS_TOO_TALL="taller-than-window",F.CLASS_CLOSED="closed",F.CLASS_CLOSE_BUTTON="close-button",F.CLASS_DRAG="drag",F.DEFAULT_WIDTH=245,F.TEXT_CLOSED="Close Controls",F.TEXT_OPEN="Open Controls",d.bind(window,"keydown",function(e){"text"===document.activeElement.type||e.which!==L&&e.keyCode!=L||F.toggleHide()},!1),p.extend(F.prototype,{add:function(e,t){return g(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return g(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.slice(this.__controllers.indexOf(e),1);var t=this;p.defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&N.removeChild(this.domElement)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new F(t);this.__folders[e]=n;var r=m(this,n.domElement);return d.addClass(r,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=d.getOffset(e.__ul).top,n=0;p.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=d.getHeight(t))}),window.innerHeight-t-O<n?(d.addClass(e.domElement,F.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-O+"px"):(d.removeClass(e.domElement,F.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&p.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},remember:function(){if(p.isUndefined(T)&&(T=new f,T.domElement.innerHTML=t),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;p.each(Array.prototype.slice.call(arguments),function(t){0==e.__rememberedObjects.length&&_(e),-1==e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&w(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=C(this)),e.folders={},p.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=C(this),S(this,!1)},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[R]=C(this,!0)),this.load.remembered[e]=C(this),this.preset=e,E(this,e,!0)},revert:function(e){p.each(this.__controllers,function(t){this.getRoot().load.remembered?y(e||this.getRoot(),t):t.setValue(t.initialValue)},this),p.each(this.__folders,function(e){e.revert(e)}),e||S(this.getRoot(),!1)},listen:function(e){var t=0==this.__listening.length;this.__listening.push(e),t&&A(this.__listening)}}),F}(n.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity 0.1s linear;-o-transition:opacity 0.1s linear;-moz-transition:opacity 0.1s linear;transition:opacity 0.1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save ul{margin-top:27px}.dg.a.has-save ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height 0.1s ease-out;-o-transition:height 0.1s ease-out;-moz-transition:height 0.1s ease-out;transition:height 0.1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li > *{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n",n.controllers.factory=function(e,t,n,r,i,o,s){return function(a,u){var l=a[u];return s.isArray(arguments[2])||s.isObject(arguments[2])?new e(a,u,arguments[2]):s.isNumber(l)?s.isNumber(arguments[2])&&s.isNumber(arguments[3])?new n(a,u,arguments[2],arguments[3]):new t(a,u,{min:arguments[2],max:arguments[3]}):s.isString(l)?new r(a,u):s.isFunction(l)?new i(a,u,""):s.isBoolean(l)?new o(a,u):void 0}}(n.controllers.OptionController,n.controllers.NumberControllerBox,n.controllers.NumberControllerSlider,n.controllers.StringController=function(e,t,n){var r=function(e,n){function i(){s.setValue(s.__input.value)}function o(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}r.superclass.call(this,e,n);var s=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),t.bind(this.__input,"keyup",i),t.bind(this.__input,"change",i),t.bind(this.__input,"blur",o),t.bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)};return r.superclass=e,n.extend(r.prototype,e.prototype,{updateDisplay:function(){return t.isActive(this.__input)||(this.__input.value=this.getValue()),r.superclass.prototype.updateDisplay.call(this)}}),r}(n.controllers.Controller,n.dom.dom,n.utils.common),n.controllers.FunctionController,n.controllers.BooleanController,n.utils.common),n.controllers.Controller,n.controllers.BooleanController,n.controllers.FunctionController,n.controllers.NumberControllerBox,n.controllers.NumberControllerSlider,n.controllers.OptionController,n.controllers.ColorController=function(e,t,n,r,i){function o(e,t,n,r){e.style.background="",i.each(u,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+r+" 100%); "})}function s(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var a=function(e,u){function l(e){d(e),t.bind(window,"mousemove",d),t.bind(window,"mouseup",c)}function c(){t.unbind(window,"mousemove",d),t.unbind(window,"mouseup",c)}function h(){var e=r(this.value);e!==!1?(g.__color.__state=e,g.setValue(g.__color.toOriginal())):this.value=g.__color.toString()}function f(){t.unbind(window,"mousemove",p),t.unbind(window,"mouseup",f)}function d(e){e.preventDefault();var n=t.getWidth(g.__saturation_field),r=t.getOffset(g.__saturation_field),i=(e.clientX-r.left+document.body.scrollLeft)/n,o=1-(e.clientY-r.top+document.body.scrollTop)/n;return o>1?o=1:0>o&&(o=0),i>1?i=1:0>i&&(i=0),g.__color.v=o,g.__color.s=i,g.setValue(g.__color.toOriginal()),!1}function p(e){e.preventDefault();var n=t.getHeight(g.__hue_field),r=t.getOffset(g.__hue_field),i=1-(e.clientY-r.top+document.body.scrollTop)/n;return i>1?i=1:0>i&&(i=0),g.__color.h=360*i,g.setValue(g.__color.toOriginal()),!1}a.superclass.call(this,e,u),this.__color=new n(this.getValue()),this.__temp=new n(0);var g=this;this.domElement=document.createElement("div"),t.makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",t.bind(this.__input,"keydown",function(e){13===e.keyCode&&h.call(this)}),t.bind(this.__input,"blur",h),t.bind(this.__selector,"mousedown",function(){t.addClass(this,"drag").bind(window,"mouseup",function(){t.removeClass(g.__selector,"drag")})});var m=document.createElement("div");i.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),i.extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),i.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),i.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),i.extend(m.style,{width:"100%",height:"100%",background:"none"}),o(m,"top","rgba(0,0,0,0)","#000"),i.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),s(this.__hue_field),i.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),t.bind(this.__saturation_field,"mousedown",l),t.bind(this.__field_knob,"mousedown",l),t.bind(this.__hue_field,"mousedown",function(e){p(e),t.bind(window,"mousemove",p),t.bind(window,"mouseup",f)}),this.__saturation_field.appendChild(m),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()};a.superclass=e,i.extend(a.prototype,e.prototype,{updateDisplay:function(){var e=r(this.getValue());if(e!==!1){var t=!1;i.each(n.COMPONENTS,function(n){return i.isUndefined(e[n])||i.isUndefined(this.__color.__state[n])||e[n]===this.__color.__state[n]?void 0:(t=!0,{})},this),t&&i.extend(this.__color.__state,e)}i.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var s=this.__color.v<.5||this.__color.s>.5?255:0,a=255-s;i.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+s+","+s+","+s+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,o(this.__saturation_field,"left","#fff",this.__temp.toString()),i.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+s+","+s+","+s+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}});var u=["-moz-","-o-","-webkit-","-ms-",""];return a}(n.controllers.Controller,n.dom.dom,n.color.Color=function(e,t,n,r){function i(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(s(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(s(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function o(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(a(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(a(this),this.__state.space="HSV"),this.__state[t]=e}})}function s(e,n,i){if("HEX"===e.__state.space)e.__state[n]=t.component_from_hex(e.__state.hex,i);else{if("HSV"!==e.__state.space)throw"Corrupted color state";r.extend(e.__state,t.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}}function a(e){var n=t.rgb_to_hsv(e.r,e.g,e.b);r.extend(e.__state,{s:n.s,v:n.v}),r.isNaN(n.h)?r.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=n.h}var u=function(){if(this.__state=e.apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1};return u.COMPONENTS=["r","g","b","h","s","v","hex","a"],r.extend(u.prototype,{toString:function(){return n(this)},toOriginal:function(){return this.__state.conversion.write(this)}}),i(u.prototype,"r",2),i(u.prototype,"g",1),i(u.prototype,"b",0),o(u.prototype,"h"),o(u.prototype,"s"),o(u.prototype,"v"),Object.defineProperty(u.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(u.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=t.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),u}(n.color.interpret,n.color.math=function(){var e;return{hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),o=n*(1-t),s=n*(1-i*t),a=n*(1-(1-i)*t),u=[[n,a,o],[s,n,o],[o,n,a],[o,s,n],[a,o,n],[n,o,s]][r];return{r:255*u[0],g:255*u[1],b:255*u[2]}},rgb_to_hsv:function(e,t,n){var r,i,o=Math.min(e,t,n),s=Math.max(e,t,n),a=s-o;return 0==s?{h:0/0,s:0,v:0}:(i=a/s,r=e==s?(t-n)/a:t==s?2+(n-e)/a:4+(e-t)/a,r/=6,0>r&&(r+=1),{h:360*r,s:i,v:s/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(t,n,r){return r<<(e=8*n)|t&~(255<<e)}}}(),n.color.toString,n.utils.common),n.color.interpret,n.utils.common),n.utils.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),n.dom.CenteredDiv=function(e,t){var n=function(){this.backgroundElement=document.createElement("div"),t.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear"}),e.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),t.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var n=this;e.bind(this.backgroundElement,"click",function(){n.hide()})};return n.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),t.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})},n.prototype.hide=function(){var t=this,n=function(){t.domElement.style.display="none",t.backgroundElement.style.display="none",e.unbind(t.domElement,"webkitTransitionEnd",n),e.unbind(t.domElement,"transitionend",n),e.unbind(t.domElement,"oTransitionEnd",n)};e.bind(this.domElement,"webkitTransitionEnd",n),e.bind(this.domElement,"transitionend",n),e.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},n.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-e.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-e.getHeight(this.domElement)/2+"px"},n}(n.dom.dom,n.utils.common),n.dom.dom,n.utils.common)},{}],30:[function(e,t,n){!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof n?t.exports=e:e(jQuery)}(function(e){function t(t){var s=t||window.event,a=u.call(arguments,1),l=0,h=0,f=0,d=0,p=0,g=0;if(t=e.event.fix(s),t.type="mousewheel","detail"in s&&(f=-1*s.detail),"wheelDelta"in s&&(f=s.wheelDelta),"wheelDeltaY"in s&&(f=s.wheelDeltaY),"wheelDeltaX"in s&&(h=-1*s.wheelDeltaX),"axis"in s&&s.axis===s.HORIZONTAL_AXIS&&(h=-1*f,f=0),l=0===f?h:f,"deltaY"in s&&(f=-1*s.deltaY,l=f),"deltaX"in s&&(h=s.deltaX,0===f&&(l=-1*h)),0!==f||0!==h){if(1===s.deltaMode){var m=e.data(this,"mousewheel-line-height");l*=m,f*=m,h*=m}else if(2===s.deltaMode){var v=e.data(this,"mousewheel-page-height");l*=v,f*=v,h*=v}if(d=Math.max(Math.abs(f),Math.abs(h)),(!o||o>d)&&(o=d,r(s,d)&&(o/=40)),r(s,d)&&(l/=40,h/=40,f/=40),l=Math[l>=1?"floor":"ceil"](l/o),h=Math[h>=1?"floor":"ceil"](h/o),f=Math[f>=1?"floor":"ceil"](f/o),c.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();p=t.clientX-y.left,g=t.clientY-y.top}return t.deltaX=h,t.deltaY=f,t.deltaFactor=o,t.offsetX=p,t.offsetY=g,t.deltaMode=0,a.unshift(t,l,h,f),i&&clearTimeout(i),i=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,a)}}function n(){o=null}function r(e,t){return c.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var i,o,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],u=Array.prototype.slice;if(e.event.fixHooks)for(var l=s.length;l;)e.event.fixHooks[s[--l]]=e.event.mouseHooks;var c=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=a.length;n;)this.addEventListener(a[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",c.getLineHeight(this)),e.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=a.length;n;)this.removeEventListener(a[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),r=n["offsetParent"in e.fn?"offsetParent":"parent"]();return r.length||(r=e("body")),parseInt(r.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})},{}],31:[function(e,t){!function(e,n){"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=Z.type(e);return"function"===n||Z.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(Z.isFunction(t))return Z.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return Z.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(at.test(t))return Z.filter(t,e,n);t=Z.filter(t,e)}return Z.grep(e,function(e){return X.call(t,e)>=0!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=pt[e]={};return Z.each(e.match(dt)||[],function(e,n){t[n]=!0}),t}function s(){J.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1),Z.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+a.uid++}function u(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(_t,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:bt.test(n)?Z.parseJSON(n):n}catch(i){}yt.set(e,t,n)}else n=void 0;return n}function l(){return!0}function c(){return!1}function h(){try{return J.activeElement}catch(e){}}function f(e,t){return Z.nodeName(e,"table")&&Z.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function d(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function p(e){var t=Pt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var n=0,r=e.length;r>n;n++)vt.set(e[n],"globalEval",!t||vt.get(t[n],"globalEval"))}function m(e,t){var n,r,i,o,s,a,u,l;if(1===t.nodeType){if(vt.hasData(e)&&(o=vt.access(e),s=vt.set(t,o),l=o.events)){delete s.handle,s.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)Z.event.add(t,i,l[i][n])}yt.hasData(e)&&(a=yt.access(e),u=Z.extend({},a),yt.set(t,u))}}function v(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Z.nodeName(e,t)?Z.merge([e],n):n}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Et.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function b(t,n){var r,i=Z(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:Z.css(i[0],"display");return i.detach(),o}function _(e){var t=J,n=Ht[e];return n||(n=b(e,t),"none"!==n&&n||(Bt=(Bt||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Bt[0].contentDocument,t.write(),t.close(),n=b(e,t),Bt.detach()),Ht[e]=n),n}function x(e,t,n){var r,i,o,s,a=e.style;return n=n||Vt(e),n&&(s=n.getPropertyValue(t)||n[t]),n&&(""!==s||Z.contains(e.ownerDocument,e)||(s=Z.style(e,t)),zt.test(s)&&qt.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function w(e,t){return{get:function(){return e()?(delete this.get,void 0):(this.get=t).apply(this,arguments)}}}function C(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),r=t,i=Yt.length;i--;)if(t=Yt[i]+n,t in e)return t;return r}function E(e,t,n){var r=Gt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function k(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=Z.css(e,n+wt[o],!0,i)),r?("content"===n&&(s-=Z.css(e,"padding"+wt[o],!0,i)),"margin"!==n&&(s-=Z.css(e,"border"+wt[o]+"Width",!0,i))):(s+=Z.css(e,"padding"+wt[o],!0,i),"padding"!==n&&(s+=Z.css(e,"border"+wt[o]+"Width",!0,i)));return s}function S(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Vt(e),s="border-box"===Z.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=x(e,t,o),(0>i||null==i)&&(i=e.style[t]),zt.test(i))return i;r=s&&(Q.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+k(e,t,n||(s?"border":"content"),r,o)+"px"}function A(e,t){for(var n,r,i,o=[],s=0,a=e.length;a>s;s++)r=e[s],r.style&&(o[s]=vt.get(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&Ct(r)&&(o[s]=vt.access(r,"olddisplay",_(r.nodeName)))):(i=Ct(r),"none"===n&&i||vt.set(r,"olddisplay",i?n:Z.css(r,"display"))));for(s=0;a>s;s++)r=e[s],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}function T(e,t,n,r,i){return new T.prototype.init(e,t,n,r,i)}function N(){return setTimeout(function(){Qt=void 0}),Qt=Z.now()}function j(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=wt[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function L(e,t,n){for(var r,i=(nn[t]||[]).concat(nn["*"]),o=0,s=i.length;s>o;o++)if(r=i[o].call(n,t,e))return r}function O(e,t,n){var r,i,o,s,a,u,l,c,h=this,f={},d=e.style,p=e.nodeType&&Ct(e),g=vt.get(e,"fxshow");n.queue||(a=Z._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,Z.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],l=Z.css(e,"display"),c="none"===l?vt.get(e,"olddisplay")||_(e.nodeName):l,"inline"===c&&"none"===Z.css(e,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",h.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Kt.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;p=!0}f[r]=g&&g[r]||Z.style(e,r)}else l=void 0;if(Z.isEmptyObject(f))"inline"===("none"===l?_(e.nodeName):l)&&(d.display=l);else{g?"hidden"in g&&(p=g.hidden):g=vt.access(e,"fxshow",{}),o&&(g.hidden=!p),p?Z(e).show():h.done(function(){Z(e).hide()}),h.done(function(){var t;vt.remove(e,"fxshow");for(t in f)Z.style(e,t,f[t])});for(r in f)s=L(p?g[r]:0,r,h),r in g||(g[r]=s.start,p&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function R(e,t){var n,r,i,o,s;for(n in e)if(r=Z.camelCase(n),i=t[r],o=e[n],Z.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),s=Z.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function D(e,t,n){var r,i,o=0,s=tn.length,a=Z.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=Qt||N(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,s=0,u=l.tweens.length;u>s;s++)l.tweens[s].run(o);return a.notifyWith(e,[l,o,n]),1>o&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Qt||N(),duration:n.duration,tweens:[],createTween:function(t,n){var r=Z.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(R(c,l.opts.specialEasing);s>o;o++)if(r=tn[o].call(l,e,c,l.opts))return r;return Z.map(c,L,l),Z.isFunction(l.opts.start)&&l.opts.start.call(e,l),Z.fx.timer(Z.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function M(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(dt)||[];if(Z.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function P(e,t,n,r){function i(a){var u;return o[a]=!0,Z.each(e[a]||[],function(e,a){var l=a(t,n,r);return"string"!=typeof l||s||o[l]?s?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),u}var o={},s=e===_n;return i(t.dataTypes[0])||!o["*"]&&i("*")}function I(e,t){var n,r,i=Z.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&Z.extend(!0,e,r),e}function F(e,t,n){for(var r,i,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;
break}s||(s=i)}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function B(e,t,n,r){var i,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(i in l)if(a=i.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[i]:l[i]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(h){return{state:"parsererror",error:s?h:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function H(e,t,n,r){var i;if(Z.isArray(t))Z.each(t,function(t,i){n||kn.test(e)?r(e,i):H(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==Z.type(t))r(e,t);else for(i in t)H(e+"["+i+"]",t[i],n,r)}function q(e){return Z.isWindow(e)?e:9===e.nodeType&&e.defaultView}var z=[],V=z.slice,W=z.concat,G=z.push,X=z.indexOf,U={},$=U.toString,Y=U.hasOwnProperty,Q={},J=e.document,K="2.1.3",Z=function(e,t){return new Z.fn.init(e,t)},et=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,tt=/^-ms-/,nt=/-([\da-z])/gi,rt=function(e,t){return t.toUpperCase()};Z.fn=Z.prototype={jquery:K,constructor:Z,selector:"",length:0,toArray:function(){return V.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:V.call(this)},pushStack:function(e){var t=Z.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Z.each(this,e,t)},map:function(e){return this.pushStack(Z.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(V.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:G,sort:z.sort,splice:z.splice},Z.extend=Z.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||Z.isFunction(s)||(s={}),a===u&&(s=this,a--);u>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],r=e[t],s!==r&&(l&&r&&(Z.isPlainObject(r)||(i=Z.isArray(r)))?(i?(i=!1,o=n&&Z.isArray(n)?n:[]):o=n&&Z.isPlainObject(n)?n:{},s[t]=Z.extend(l,o,r)):void 0!==r&&(s[t]=r));return s},Z.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Z.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==Z.type(e)||e.nodeType||Z.isWindow(e)?!1:e.constructor&&!Y.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?U[$.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=Z.trim(e),e&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(tt,"ms-").replace(nt,rt)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,s=e.length,a=n(e);if(r){if(a)for(;s>o&&(i=t.apply(e[o],r),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],r),i===!1)break}else if(a)for(;s>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(et,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?Z.merge(r,"string"==typeof e?[e]:e):G.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:X.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,s=e.length,a=!n;s>o;o++)r=!t(e[o],o),r!==a&&i.push(e[o]);return i},map:function(e,t,r){var i,o=0,s=e.length,a=n(e),u=[];if(a)for(;s>o;o++)i=t(e[o],o,r),null!=i&&u.push(i);else for(o in e)i=t(e[o],o,r),null!=i&&u.push(i);return W.apply([],u)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),Z.isFunction(e)?(r=V.call(arguments,2),i=function(){return e.apply(t||this,r.concat(V.call(arguments)))},i.guid=e.guid=e.guid||Z.guid++,i):void 0},now:Date.now,support:Q}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){U["[object "+t+"]"]=t.toLowerCase()});var it=function(e){function t(e,t,n,r){var i,o,s,a,u,l,h,d,p,g;if((t?t.ownerDocument||t:H)!==O&&L(t),t=t||O,n=n||[],a=t.nodeType,"string"!=typeof e||!e||1!==a&&9!==a&&11!==a)return n;if(!r&&D){if(11!==a&&(i=yt.exec(e)))if(s=i[1]){if(9===a){if(o=t.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&F(t,o)&&o.id===s)return n.push(o),n}else{if(i[2])return K.apply(n,t.getElementsByTagName(e)),n;if((s=i[3])&&x.getElementsByClassName)return K.apply(n,t.getElementsByClassName(s)),n}if(x.qsa&&(!M||!M.test(e))){if(d=h=B,p=t,g=1!==a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(l=k(e),(h=t.getAttribute("id"))?d=h.replace(_t,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",u=l.length;u--;)l[u]=d+f(l[u]);p=bt.test(e)&&c(t.parentNode)||t,g=l.join(",")}if(g)try{return K.apply(n,p.querySelectorAll(g)),n}catch(m){}finally{h||t.removeAttribute("id")}}}return A(e.replace(ut,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>w.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[B]=!0,e}function i(e){var t=O.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)w.attrHandle[n[r]]=t}function s(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||U)-(~e.sourceIndex||U);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function h(){}function f(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function d(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=z++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,s){var a,u,l=[q,o];if(s){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(u=t[B]||(t[B]={}),(a=u[r])&&a[0]===q&&a[1]===o)return l[2]=a[2];if(u[r]=l,l[2]=e(t,n,s))return!0}}}function p(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function m(e,t,n,r,i){for(var o,s=[],a=0,u=e.length,l=null!=t;u>a;a++)(o=e[a])&&(!n||n(o,r,i))&&(s.push(o),l&&t.push(a));return s}function v(e,t,n,i,o,s){return i&&!i[B]&&(i=v(i)),o&&!o[B]&&(o=v(o,s)),r(function(r,s,a,u){var l,c,h,f=[],d=[],p=s.length,v=r||g(t||"*",a.nodeType?[a]:a,[]),y=!e||!r&&t?v:m(v,f,e,a,u),b=n?o||(r?e:p||i)?[]:s:y;if(n&&n(y,b,a,u),i)for(l=m(b,d),i(l,[],a,u),c=l.length;c--;)(h=l[c])&&(b[d[c]]=!(y[d[c]]=h));if(r){if(o||e){if(o){for(l=[],c=b.length;c--;)(h=b[c])&&l.push(y[c]=h);o(null,b=[],l,u)}for(c=b.length;c--;)(h=b[c])&&(l=o?et(r,h):f[c])>-1&&(r[l]=!(s[l]=h))}}else b=m(b===s?b.splice(p,b.length):b),o?o(null,s,b,u):K.apply(s,b)})}function y(e){for(var t,n,r,i=e.length,o=w.relative[e[0].type],s=o||w.relative[" "],a=o?1:0,u=d(function(e){return e===t},s,!0),l=d(function(e){return et(t,e)>-1},s,!0),c=[function(e,n,r){var i=!o&&(r||n!==T)||((t=n).nodeType?u(e,n,r):l(e,n,r));return t=null,i}];i>a;a++)if(n=w.relative[e[a].type])c=[d(p(c),n)];else{if(n=w.filter[e[a].type].apply(null,e[a].matches),n[B]){for(r=++a;i>r&&!w.relative[e[r].type];r++);return v(a>1&&p(c),a>1&&f(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ut,"$1"),n,r>a&&y(e.slice(a,r)),i>r&&y(e=e.slice(r)),i>r&&f(e))}c.push(n)}return p(c)}function b(e,n){var i=n.length>0,o=e.length>0,s=function(r,s,a,u,l){var c,h,f,d=0,p="0",g=r&&[],v=[],y=T,b=r||o&&w.find.TAG("*",l),_=q+=null==y?1:Math.random()||.1,x=b.length;for(l&&(T=s!==O&&s);p!==x&&null!=(c=b[p]);p++){if(o&&c){for(h=0;f=e[h++];)if(f(c,s,a)){u.push(c);break}l&&(q=_)}i&&((c=!f&&c)&&d--,r&&g.push(c))}if(d+=p,i&&p!==d){for(h=0;f=n[h++];)f(g,v,s,a);if(r){if(d>0)for(;p--;)g[p]||v[p]||(v[p]=Q.call(u));v=m(v)}K.apply(u,v),l&&!r&&v.length>0&&d+n.length>1&&t.uniqueSort(u)}return l&&(q=_,T=y),g};return i?r(s):s}var _,x,w,C,E,k,S,A,T,N,j,L,O,R,D,M,P,I,F,B="sizzle"+1*new Date,H=e.document,q=0,z=0,V=n(),W=n(),G=n(),X=function(e,t){return e===t&&(j=!0),0},U=1<<31,$={}.hasOwnProperty,Y=[],Q=Y.pop,J=Y.push,K=Y.push,Z=Y.slice,et=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},tt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",it=rt.replace("w","w#"),ot="\\["+nt+"*("+rt+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+it+"))|)"+nt+"*\\]",st=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",at=new RegExp(nt+"+","g"),ut=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ct=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ht=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ft=new RegExp(st),dt=new RegExp("^"+it+"$"),pt={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+st),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+tt+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},gt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,bt=/[+~]/,_t=/'|\\/g,xt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),wt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Ct=function(){L()};try{K.apply(Y=Z.call(H.childNodes),H.childNodes),Y[H.childNodes.length].nodeType}catch(Et){K={apply:Y.length?function(e,t){J.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}x=t.support={},E=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},L=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:H;return r!==O&&9===r.nodeType&&r.documentElement?(O=r,R=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Ct,!1):n.attachEvent&&n.attachEvent("onunload",Ct)),D=!E(r),x.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=i(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=vt.test(r.getElementsByClassName),x.getById=i(function(e){return R.appendChild(e).id=B,!r.getElementsByName||!r.getElementsByName(B).length}),x.getById?(w.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&D){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},w.filter.ID=function(e){var t=e.replace(xt,wt);return function(e){return e.getAttribute("id")===t}}):(delete w.find.ID,w.filter.ID=function(e){var t=e.replace(xt,wt);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),w.find.TAG=x.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},w.find.CLASS=x.getElementsByClassName&&function(e,t){return D?t.getElementsByClassName(e):void 0},P=[],M=[],(x.qsa=vt.test(r.querySelectorAll))&&(i(function(e){R.appendChild(e).innerHTML="<a id='"+B+"'></a><select id='"+B+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+nt+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+nt+"*(?:value|"+tt+")"),e.querySelectorAll("[id~="+B+"-]").length||M.push("~="),e.querySelectorAll(":checked").length||M.push(":checked"),e.querySelectorAll("a#"+B+"+*").length||M.push(".#.+[+~]")}),i(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+nt+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(x.matchesSelector=vt.test(I=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&i(function(e){x.disconnectedMatch=I.call(e,"div"),I.call(e,"[s!='']:x"),P.push("!=",st)}),M=M.length&&new RegExp(M.join("|")),P=P.length&&new RegExp(P.join("|")),t=vt.test(R.compareDocumentPosition),F=t||vt.test(R.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},X=t?function(e,t){if(e===t)return j=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!x.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===H&&F(H,e)?-1:t===r||t.ownerDocument===H&&F(H,t)?1:N?et(N,e)-et(N,t):0:4&n?-1:1)}:function(e,t){if(e===t)return j=!0,0;var n,i=0,o=e.parentNode,a=t.parentNode,u=[e],l=[t];if(!o||!a)return e===r?-1:t===r?1:o?-1:a?1:N?et(N,e)-et(N,t):0;if(o===a)return s(e,t);for(n=e;n=n.parentNode;)u.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;u[i]===l[i];)i++;return i?s(u[i],l[i]):u[i]===H?-1:l[i]===H?1:0},r):O},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==O&&L(e),n=n.replace(ht,"='$1']"),!(!x.matchesSelector||!D||P&&P.test(n)||M&&M.test(n)))try{var r=I.call(e,n);if(r||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,O,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==O&&L(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==O&&L(e);var n=w.attrHandle[t.toLowerCase()],r=n&&$.call(w.attrHandle,t.toLowerCase())?n(e,t,!D):void 0;return void 0!==r?r:x.attributes||!D?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(j=!x.detectDuplicates,N=!x.sortStable&&e.slice(0),e.sort(X),j){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return N=null,e},C=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=C(t);return n},w=t.selectors={cacheLength:50,createPseudo:r,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xt,wt),e[3]=(e[3]||e[4]||e[5]||"").replace(xt,wt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pt.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ft.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xt,wt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=V[e+" "];return t||(t=new RegExp("(^|"+nt+")"+e+"("+nt+"|$)"))&&V(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(at," ")+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,h,f,d,p,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!u&&!a;if(m){if(o){for(;g;){for(h=t;h=h[g];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[s?m.firstChild:m.lastChild],s&&y){for(c=m[B]||(m[B]={}),l=c[e]||[],d=l[0]===q&&l[1],f=l[0]===q&&l[2],h=d&&m.childNodes[d];h=++d&&h&&h[g]||(f=d=0)||p.pop();)if(1===h.nodeType&&++f&&h===t){c[e]=[q,d,f];break}}else if(y&&(l=(t[B]||(t[B]={}))[e])&&l[0]===q)f=l[1];else for(;(h=++d&&h&&h[g]||(f=d=0)||p.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++f||(y&&((h[B]||(h[B]={}))[e]=[q,f]),h!==t)););return f-=i,f===r||f%r===0&&f/r>=0}}},PSEUDO:function(e,n){var i,o=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[B]?o(n):o.length>1?(i=[e,e,"",n],w.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),s=i.length;s--;)r=et(e,i[s]),e[r]=!(t[r]=i[s])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=S(e.replace(ut,"$1"));return i[B]?r(function(e,t,n,r){for(var o,s=i(e,null,r,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(xt,wt),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:r(function(e){return dt.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(xt,wt).toLowerCase(),function(t){var n;do if(n=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===R},focus:function(e){return e===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return mt.test(e.nodeName)},input:function(e){return gt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},w.pseudos.nth=w.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[_]=a(_);for(_ in{submit:!0,reset:!0})w.pseudos[_]=u(_);return h.prototype=w.filters=w.pseudos,w.setFilters=new h,k=t.tokenize=function(e,n){var r,i,o,s,a,u,l,c=W[e+" "];if(c)return n?0:c.slice(0);for(a=e,u=[],l=w.preFilter;a;){(!r||(i=lt.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),r=!1,(i=ct.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ut," ")}),a=a.slice(r.length));for(s in w.filter)!(i=pt[s].exec(a))||l[s]&&!(i=l[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?t.error(e):W(e,u).slice(0)},S=t.compile=function(e,t){var n,r=[],i=[],o=G[e+" "];if(!o){for(t||(t=k(e)),n=t.length;n--;)o=y(t[n]),o[B]?r.push(o):i.push(o);o=G(e,b(i,r)),o.selector=e}return o},A=t.select=function(e,t,n,r){var i,o,s,a,u,l="function"==typeof e&&e,h=!r&&k(e=l.selector||e);if(n=n||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&x.getById&&9===t.nodeType&&D&&w.relative[o[1].type]){if(t=(w.find.ID(s.matches[0].replace(xt,wt),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=pt.needsContext.test(e)?0:o.length;i--&&(s=o[i],!w.relative[a=s.type]);)if((u=w.find[a])&&(r=u(s.matches[0].replace(xt,wt),bt.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&f(o),!e)return K.apply(n,r),n;break}}return(l||S(e,h))(r,t,!D,n,bt.test(e)&&c(t.parentNode)||t),n},x.sortStable=B.split("").sort(X).join("")===B,x.detectDuplicates=!!j,L(),x.sortDetached=i(function(e){return 1&e.compareDocumentPosition(O.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(tt,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);Z.find=it,Z.expr=it.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=it.uniqueSort,Z.text=it.getText,Z.isXMLDoc=it.isXML,Z.contains=it.contains;var ot=Z.expr.match.needsContext,st=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,at=/^.[^:#\[\.,]*$/;Z.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?Z.find.matchesSelector(r,e)?[r]:[]:Z.find.matches(e,Z.grep(t,function(e){return 1===e.nodeType}))},Z.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(Z(e).filter(function(){for(t=0;n>t;t++)if(Z.contains(i[t],this))return!0}));for(t=0;n>t;t++)Z.find(e,i[t],r);return r=this.pushStack(n>1?Z.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&ot.test(e)?Z(e):e||[],!1).length}});var ut,lt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ct=Z.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:lt.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||ut).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Z?t[0]:t,Z.merge(this,Z.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),st.test(n[1])&&Z.isPlainObject(t))for(n in t)Z.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=J.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Z.isFunction(e)?"undefined"!=typeof ut.ready?ut.ready(e):e(Z):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))};ct.prototype=Z.fn,ut=Z(J);var ht=/^(?:parents|prev(?:Until|All))/,ft={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&Z(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),Z.fn.extend({has:function(e){var t=Z(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(Z.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],s=ot.test(e)||"string"!=typeof e?Z(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&Z.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?Z.unique(o):o)},index:function(e){return e?"string"==typeof e?X.call(Z(e),this[0]):X.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Z.unique(Z.merge(this.get(),Z(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Z.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Z.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Z.dir(e,"previousSibling",n)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(n,r){var i=Z.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=Z.filter(r,i)),this.length>1&&(ft[e]||Z.unique(i),ht.test(e)&&i.reverse()),this.pushStack(i)}});var dt=/\S+/g,pt={};Z.Callbacks=function(e){e="string"==typeof e?pt[e]||o(e):Z.extend({},e);var t,n,r,i,s,a,u=[],l=!e.once&&[],c=function(o){for(t=e.memory&&o,n=!0,a=i||0,i=0,s=u.length,r=!0;u&&s>a;a++)if(u[a].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,u&&(l?l.length&&c(l.shift()):t?u=[]:h.disable())},h={add:function(){if(u){var n=u.length;!function o(t){Z.each(t,function(t,n){var r=Z.type(n);"function"===r?e.unique&&h.has(n)||u.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),r?s=u.length:t&&(i=n,c(t))}return this},remove:function(){return u&&Z.each(arguments,function(e,t){for(var n;(n=Z.inArray(t,u,n))>-1;)u.splice(n,1),r&&(s>=n&&s--,a>=n&&a--)}),this},has:function(e){return e?Z.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],s=0,this},disable:function(){return u=l=t=void 0,this},disabled:function(){return!u},lock:function(){return l=void 0,t||h.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!u||n&&!l||(t=t||[],t=[e,t.slice?t.slice():t],r?l.push(t):c(t)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(n){Z.each(t,function(t,o){var s=Z.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,r):r}},i={};return r.pipe=r.then,Z.each(t,function(e,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=V.call(arguments),s=o.length,a=1!==s||e&&Z.isFunction(e.promise)?s:0,u=1===a?e:Z.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?V.call(arguments):i,r===t?u.notifyWith(n,r):--a||u.resolveWith(n,r)}};if(s>1)for(t=new Array(s),n=new Array(s),r=new Array(s);s>i;i++)o[i]&&Z.isFunction(o[i].promise)?o[i].promise().done(l(i,r,o)).fail(u.reject).progress(l(i,n,t)):--a;return a||u.resolveWith(r,o),u.promise()}});var gt;Z.fn.ready=function(e){return Z.ready.promise().done(e),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){(e===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,e!==!0&&--Z.readyWait>0||(gt.resolveWith(J,[Z]),Z.fn.triggerHandler&&(Z(J).triggerHandler("ready"),Z(J).off("ready"))))}}),Z.ready.promise=function(t){return gt||(gt=Z.Deferred(),"complete"===J.readyState?setTimeout(Z.ready):(J.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1))),gt.promise(t)},Z.ready.promise();var mt=Z.access=function(e,t,n,r,i,o,s){var a=0,u=e.length,l=null==n;if("object"===Z.type(n)){i=!0;for(a in n)Z.access(e,t,a,n[a],!0,o,s)}else if(void 0!==r&&(i=!0,Z.isFunction(r)||(s=!0),l&&(s?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(Z(e),n)})),t))for(;u>a;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):u?t(e[0],n):o};Z.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},a.uid=1,a.accepts=Z.acceptData,a.prototype={key:function(e){if(!a.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=a.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,Z.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(Z.isEmptyObject(o))Z.extend(this.cache[i],t);else for(r in t)o[r]=t[r];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,Z.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=this.key(e),s=this.cache[o];if(void 0===t)this.cache[o]={};else{Z.isArray(t)?r=t.concat(t.map(Z.camelCase)):(i=Z.camelCase(t),t in s?r=[t,i]:(r=i,r=r in s?[r]:r.match(dt)||[])),n=r.length;for(;n--;)delete s[r[n]]}},hasData:function(e){return!Z.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var vt=new a,yt=new a,bt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,_t=/([A-Z])/g;Z.extend({hasData:function(e){return yt.hasData(e)||vt.hasData(e)},data:function(e,t,n){return yt.access(e,t,n)},removeData:function(e,t){yt.remove(e,t)},_data:function(e,t,n){return vt.access(e,t,n)},_removeData:function(e,t){vt.remove(e,t)}}),Z.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=yt.get(o),1===o.nodeType&&!vt.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(r=s[n].name,0===r.indexOf("data-")&&(r=Z.camelCase(r.slice(5)),u(o,r,i[r])));
vt.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){yt.set(this,e)}):mt(this,function(t){var n,r=Z.camelCase(e);if(o&&void 0===t){if(n=yt.get(o,e),void 0!==n)return n;if(n=yt.get(o,r),void 0!==n)return n;if(n=u(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=yt.get(this,r);yt.set(this,r,t),-1!==e.indexOf("-")&&void 0!==n&&yt.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){yt.remove(this,e)})}}),Z.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=vt.get(e,t),n&&(!r||Z.isArray(n)?r=vt.access(e,t,Z.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=Z.queue(e,t),r=n.length,i=n.shift(),o=Z._queueHooks(e,t),s=function(){Z.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return vt.get(e,n)||vt.access(e,n,{empty:Z.Callbacks("once memory").add(function(){vt.remove(e,[t+"queue",n])})})}}),Z.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Z.queue(this[0],e):void 0===t?this:this.each(function(){var n=Z.queue(this,e,t);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=Z.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=vt.get(o[s],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var xt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wt=["Top","Right","Bottom","Left"],Ct=function(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)},Et=/^(?:checkbox|radio)$/i;!function(){var e=J.createDocumentFragment(),t=e.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),Q.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Q.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var kt="undefined";Q.focusinBubbles="onfocusin"in e;var St=/^key/,At=/^(?:mouse|pointer|contextmenu)|click/,Tt=/^(?:focusinfocus|focusoutblur)$/,Nt=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(e,t,n,r,i){var o,s,a,u,l,c,h,f,d,p,g,m=vt.get(e);if(m)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=Z.guid++),(u=m.events)||(u=m.events={}),(s=m.handle)||(s=m.handle=function(t){return typeof Z!==kt&&Z.event.triggered!==t.type?Z.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(dt)||[""],l=t.length;l--;)a=Nt.exec(t[l])||[],d=g=a[1],p=(a[2]||"").split(".").sort(),d&&(h=Z.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,h=Z.event.special[d]||{},c=Z.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&Z.expr.match.needsContext.test(i),namespace:p.join(".")},o),(f=u[d])||(f=u[d]=[],f.delegateCount=0,h.setup&&h.setup.call(e,r,p,s)!==!1||e.addEventListener&&e.addEventListener(d,s,!1)),h.add&&(h.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,c):f.push(c),Z.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,s,a,u,l,c,h,f,d,p,g,m=vt.hasData(e)&&vt.get(e);if(m&&(u=m.events)){for(t=(t||"").match(dt)||[""],l=t.length;l--;)if(a=Nt.exec(t[l])||[],d=g=a[1],p=(a[2]||"").split(".").sort(),d){for(h=Z.event.special[d]||{},d=(r?h.delegateType:h.bindType)||d,f=u[d]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)c=f[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,h.remove&&h.remove.call(e,c));s&&!f.length&&(h.teardown&&h.teardown.call(e,p,m.handle)!==!1||Z.removeEvent(e,d,m.handle),delete u[d])}else for(d in u)Z.event.remove(e,d+t[l],n,r,!0);Z.isEmptyObject(u)&&(delete m.handle,vt.remove(e,"events"))}},trigger:function(t,n,r,i){var o,s,a,u,l,c,h,f=[r||J],d=Y.call(t,"type")?t.type:t,p=Y.call(t,"namespace")?t.namespace.split("."):[];if(s=a=r=r||J,3!==r.nodeType&&8!==r.nodeType&&!Tt.test(d+Z.event.triggered)&&(d.indexOf(".")>=0&&(p=d.split("."),d=p.shift(),p.sort()),l=d.indexOf(":")<0&&"on"+d,t=t[Z.expando]?t:new Z.Event(d,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=p.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:Z.makeArray(n,[t]),h=Z.event.special[d]||{},i||!h.trigger||h.trigger.apply(r,n)!==!1)){if(!i&&!h.noBubble&&!Z.isWindow(r)){for(u=h.delegateType||d,Tt.test(u+d)||(s=s.parentNode);s;s=s.parentNode)f.push(s),a=s;a===(r.ownerDocument||J)&&f.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=f[o++])&&!t.isPropagationStopped();)t.type=o>1?u:h.bindType||d,c=(vt.get(s,"events")||{})[t.type]&&vt.get(s,"handle"),c&&c.apply(s,n),c=l&&s[l],c&&c.apply&&Z.acceptData(s)&&(t.result=c.apply(s,n),t.result===!1&&t.preventDefault());return t.type=d,i||t.isDefaultPrevented()||h._default&&h._default.apply(f.pop(),n)!==!1||!Z.acceptData(r)||l&&Z.isFunction(r[d])&&!Z.isWindow(r)&&(a=r[l],a&&(r[l]=null),Z.event.triggered=d,r[d](),Z.event.triggered=void 0,a&&(r[l]=a)),t.result}},dispatch:function(e){e=Z.event.fix(e);var t,n,r,i,o,s=[],a=V.call(arguments),u=(vt.get(this,"events")||{})[e.type]||[],l=Z.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(s=Z.event.handlers.call(this,e,u),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,r=((Z.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==e.type){for(r=[],n=0;a>n;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?Z(i,this).index(u)>=0:Z.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||J,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[Z.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=At.test(i)?this.mouseHooks:St.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new Z.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==h()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Z.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=Z.extend(new Z.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?Z.event.trigger(i,null,t):Z.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},Z.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?l:c):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),this[Z.expando]=!0,void 0):new Z.Event(e,t)},Z.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=l,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!Z.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),Q.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=vt.access(r,t);i||r.addEventListener(e,n,!0),vt.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=vt.access(r,t)-1;i?vt.access(r,t,i):(r.removeEventListener(e,n,!0),vt.remove(r,t))}}}),Z.fn.extend({on:function(e,t,n,r,i){var o,s;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=c;else if(!r)return this;return 1===i&&(o=r,r=function(e){return Z().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,Z(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=c),this.each(function(){Z.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?Z.event.trigger(e,t,n,!0):void 0}});var jt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Lt=/<([\w:]+)/,Ot=/<|&#?\w+;/,Rt=/<(?:script|style|link)/i,Dt=/checked\s*(?:[^=]|=\s*.checked.)/i,Mt=/^$|\/(?:java|ecma)script/i,Pt=/^true\/(.*)/,It=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ft={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ft.optgroup=Ft.option,Ft.tbody=Ft.tfoot=Ft.colgroup=Ft.caption=Ft.thead,Ft.th=Ft.td,Z.extend({clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),u=Z.contains(e.ownerDocument,e);if(!(Q.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(s=v(a),o=v(e),r=0,i=o.length;i>r;r++)y(o[r],s[r]);if(t)if(n)for(o=o||v(e),s=s||v(a),r=0,i=o.length;i>r;r++)m(o[r],s[r]);else m(e,a);return s=v(a,"script"),s.length>0&&g(s,!u&&v(e,"script")),a},buildFragment:function(e,t,n,r){for(var i,o,s,a,u,l,c=t.createDocumentFragment(),h=[],f=0,d=e.length;d>f;f++)if(i=e[f],i||0===i)if("object"===Z.type(i))Z.merge(h,i.nodeType?[i]:i);else if(Ot.test(i)){for(o=o||c.appendChild(t.createElement("div")),s=(Lt.exec(i)||["",""])[1].toLowerCase(),a=Ft[s]||Ft._default,o.innerHTML=a[1]+i.replace(jt,"<$1></$2>")+a[2],l=a[0];l--;)o=o.lastChild;Z.merge(h,o.childNodes),o=c.firstChild,o.textContent=""}else h.push(t.createTextNode(i));for(c.textContent="",f=0;i=h[f++];)if((!r||-1===Z.inArray(i,r))&&(u=Z.contains(i.ownerDocument,i),o=v(c.appendChild(i),"script"),u&&g(o),n))for(l=0;i=o[l++];)Mt.test(i.type||"")&&n.push(i);return c},cleanData:function(e){for(var t,n,r,i,o=Z.event.special,s=0;void 0!==(n=e[s]);s++){if(Z.acceptData(n)&&(i=n[vt.expando],i&&(t=vt.cache[i]))){if(t.events)for(r in t.events)o[r]?Z.event.remove(n,r):Z.removeEvent(n,r,t.handle);vt.cache[i]&&delete vt.cache[i]}delete yt.cache[n[yt.expando]]}}}),Z.fn.extend({text:function(e){return mt(this,function(e){return void 0===e?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?Z.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||Z.cleanData(v(n)),n.parentNode&&(t&&Z.contains(n.ownerDocument,n)&&g(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Z.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return mt(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Rt.test(e)&&!Ft[(Lt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(jt,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(Z.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Z.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=W.apply([],e);var n,r,i,o,s,a,u=0,l=this.length,c=this,h=l-1,f=e[0],g=Z.isFunction(f);if(g||l>1&&"string"==typeof f&&!Q.checkClone&&Dt.test(f))return this.each(function(n){var r=c.eq(n);g&&(e[0]=f.call(this,n,r.html())),r.domManip(e,t)});if(l&&(n=Z.buildFragment(e,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=Z.map(v(n,"script"),d),o=i.length;l>u;u++)s=n,u!==h&&(s=Z.clone(s,!0,!0),o&&Z.merge(i,v(s,"script"))),t.call(this[u],s,u);if(o)for(a=i[i.length-1].ownerDocument,Z.map(i,p),u=0;o>u;u++)s=i[u],Mt.test(s.type||"")&&!vt.access(s,"globalEval")&&Z.contains(a,s)&&(s.src?Z._evalUrl&&Z._evalUrl(s.src):Z.globalEval(s.textContent.replace(It,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(e){for(var n,r=[],i=Z(e),o=i.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),Z(i[s])[t](n),G.apply(r,n.get());return this.pushStack(r)}});var Bt,Ht={},qt=/^margin/,zt=new RegExp("^("+xt+")(?!px)[a-z%]+$","i"),Vt=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",i.appendChild(o);var t=e.getComputedStyle(s,null);n="1%"!==t.top,r="4px"===t.width,i.removeChild(o)}var n,r,i=J.documentElement,o=J.createElement("div"),s=J.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),e.getComputedStyle&&Z.extend(Q,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},reliableMarginRight:function(){var t,n=s.appendChild(J.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",i.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),i.removeChild(o),s.removeChild(n),t}}))}(),Z.swap=function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=s[o];return i};var Wt=/^(none|table(?!-c[ea]).+)/,Gt=new RegExp("^("+xt+")(.*)$","i"),Xt=new RegExp("^([+-])=("+xt+")","i"),Ut={position:"absolute",visibility:"hidden",display:"block"},$t={letterSpacing:"0",fontWeight:"400"},Yt=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=x(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=Z.camelCase(t),u=e.style;return t=Z.cssProps[a]||(Z.cssProps[a]=C(u,a)),s=Z.cssHooks[t]||Z.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:u[t]:(o=typeof n,"string"===o&&(i=Xt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(Z.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||Z.cssNumber[a]||(n+="px"),Q.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(u[t]=n)),void 0)}},css:function(e,t,n,r){var i,o,s,a=Z.camelCase(t);return t=Z.cssProps[a]||(Z.cssProps[a]=C(e.style,a)),s=Z.cssHooks[t]||Z.cssHooks[a],s&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=x(e,t,r)),"normal"===i&&t in $t&&(i=$t[t]),""===n||n?(o=parseFloat(i),n===!0||Z.isNumeric(o)?o||0:i):i}}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,n,r){return n?Wt.test(Z.css(e,"display"))&&0===e.offsetWidth?Z.swap(e,Ut,function(){return S(e,t,r)}):S(e,t,r):void 0},set:function(e,n,r){var i=r&&Vt(e);return E(e,n,r?k(e,t,r,"border-box"===Z.css(e,"boxSizing",!1,i),i):0)}}}),Z.cssHooks.marginRight=w(Q.reliableMarginRight,function(e,t){return t?Z.swap(e,{display:"inline-block"},x,[e,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+wt[r]+t]=o[r]||o[r-2]||o[0];return i}},qt.test(e)||(Z.cssHooks[e+t].set=E)}),Z.fn.extend({css:function(e,t){return mt(this,function(e,t,n){var r,i,o={},s=0;if(Z.isArray(t)){for(r=Vt(e),i=t.length;i>s;s++)o[t[s]]=Z.css(e,t[s],!1,r);return o}return void 0!==n?Z.style(e,t,n):Z.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ct(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=T,T.prototype={constructor:T,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(Z.cssNumber[n]?"":"px")},cur:function(){var e=T.propHooks[this.prop];return e&&e.get?e.get(this):T.propHooks._default.get(this)},run:function(e){var t,n=T.propHooks[this.prop];return this.pos=t=this.options.duration?Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):T.propHooks._default.set(this),this}},T.prototype.init.prototype=T.prototype,T.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},T.propHooks.scrollTop=T.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.fx=T.prototype.init,Z.fx.step={};var Qt,Jt,Kt=/^(?:toggle|show|hide)$/,Zt=new RegExp("^(?:([+-])=|)("+xt+")([a-z%]*)$","i"),en=/queueHooks$/,tn=[O],nn={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Zt.exec(t),o=i&&i[3]||(Z.cssNumber[e]?"":"px"),s=(Z.cssNumber[e]||"px"!==o&&+r)&&Zt.exec(Z.css(n.elem,e)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],i=i||[],s=+r||1;do a=a||".5",s/=a,Z.style(n.elem,e,s+o);while(a!==(a=n.cur()/r)&&1!==a&&--u)}return i&&(s=n.start=+s||+r||0,n.unit=o,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};Z.Animation=Z.extend(D,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],nn[n]=nn[n]||[],nn[n].unshift(t)},prefilter:function(e,t){t?tn.unshift(e):tn.push(e)}}),Z.speed=function(e,t,n){var r=e&&"object"==typeof e?Z.extend({},e):{complete:n||!n&&t||Z.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Z.isFunction(t)&&t};return r.duration=Z.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in Z.fx.speeds?Z.fx.speeds[r.duration]:Z.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){Z.isFunction(r.old)&&r.old.call(this),r.queue&&Z.dequeue(this,r.queue)},r},Z.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ct).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=Z.isEmptyObject(e),o=Z.speed(t,n,r),s=function(){var t=D(this,Z.extend({},e),o);(i||vt.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=Z.timers,s=vt.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&en.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&Z.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=vt.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=Z.timers,s=r?r.length:0;for(n.finish=!0,Z.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),Z.each(["toggle","show","hide"],function(e,t){var n=Z.fn[t];Z.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(j(t,!0),e,r,i)}}),Z.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Z.timers=[],Z.fx.tick=function(){var e,t=0,n=Z.timers;for(Qt=Z.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Z.fx.stop(),Qt=void 0},Z.fx.timer=function(e){Z.timers.push(e),e()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Jt||(Jt=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Jt),Jt=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),n=t.appendChild(J.createElement("option"));e.type="checkbox",Q.checkOn=""!==e.value,Q.optSelected=n.selected,t.disabled=!0,Q.optDisabled=!n.disabled,e=J.createElement("input"),e.value="t",e.type="radio",Q.radioValue="t"===e.value}();var rn,on,sn=Z.expr.attrHandle;Z.fn.extend({attr:function(e,t){return mt(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})}}),Z.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===kt?Z.prop(e,t,n):(1===o&&Z.isXMLDoc(e)||(t=t.toLowerCase(),r=Z.attrHooks[t]||(Z.expr.match.bool.test(t)?on:rn)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=Z.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):(Z.removeAttr(e,t),void 0))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(dt);if(o&&1===e.nodeType)for(;n=o[i++];)r=Z.propFix[n]||n,Z.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!Q.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),on={set:function(e,t,n){return t===!1?Z.removeAttr(e,n):e.setAttribute(n,n),n}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(e,t){var n=sn[t]||Z.find.attr;sn[t]=function(e,t,r){var i,o;return r||(o=sn[t],sn[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,sn[t]=o),i}});var an=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(e,t){return mt(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Z.propFix[e]||e]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!Z.isXMLDoc(e),o&&(t=Z.propFix[t]||t,i=Z.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||an.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Q.optSelected||(Z.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var un=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(e){var t,n,r,i,o,s,a="string"==typeof e&&e,u=0,l=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(dt)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(un," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=Z.trim(r),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,r,i,o,s,a=0===arguments.length||"string"==typeof e&&e,u=0,l=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(dt)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(un," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");s=e?Z.trim(r):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):Z.isFunction(e)?this.each(function(n){Z(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,i=Z(this),o=e.match(dt)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===kt||"boolean"===n)&&(this.className&&vt.set(this,"__className__",this.className),this.className=this.className||e===!1?"":vt.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(un," ").indexOf(t)>=0)return!0;return!1}});var ln=/\r/g;Z.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=Z.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,Z(this).val()):e,null==i?i="":"number"==typeof i?i+="":Z.isArray(i)&&(i=Z.map(i,function(e){return null==e?"":e+""})),t=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=Z.valHooks[i.type]||Z.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(ln,""):null==n?"":n)}}}),Z.extend({valHooks:{option:{get:function(e){var t=Z.find.attr(e,"value");return null!=t?t:Z.trim(Z.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,s=o?null:[],a=o?i+1:r.length,u=0>i?a:o?i:0;a>u;u++)if(n=r[u],!(!n.selected&&u!==i||(Q.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Z.nodeName(n.parentNode,"optgroup"))){if(t=Z(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=Z.makeArray(t),s=i.length;s--;)r=i[s],(r.selected=Z.inArray(r.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}},Q.checkOn||(Z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Z.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var cn=Z.now(),hn=/\?/;Z.parseJSON=function(e){return JSON.parse(e+"")},Z.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+e),t};var fn=/#.*$/,dn=/([?&])_=[^&]*/,pn=/^(.*?):[ \t]*([^\r\n]*)$/gm,gn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,mn=/^(?:GET|HEAD)$/,vn=/^\/\//,yn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,bn={},_n={},xn="*/".concat("*"),wn=e.location.href,Cn=yn.exec(wn.toLowerCase())||[];Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wn,type:"GET",isLocal:gn.test(Cn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?I(I(e,Z.ajaxSettings),t):I(Z.ajaxSettings,e)
},ajaxPrefilter:M(bn),ajaxTransport:M(_n),ajax:function(e,t){function n(e,t,n,s){var u,c,v,y,_,w=t;2!==b&&(b=2,a&&clearTimeout(a),r=void 0,o=s||"",x.readyState=e>0?4:0,u=e>=200&&300>e||304===e,n&&(y=F(h,x,n)),y=B(h,y,x,u),u?(h.ifModified&&(_=x.getResponseHeader("Last-Modified"),_&&(Z.lastModified[i]=_),_=x.getResponseHeader("etag"),_&&(Z.etag[i]=_)),204===e||"HEAD"===h.type?w="nocontent":304===e?w="notmodified":(w=y.state,c=y.data,v=y.error,u=!v)):(v=w,(e||!w)&&(w="error",0>e&&(e=0))),x.status=e,x.statusText=(t||w)+"",u?p.resolveWith(f,[c,w,x]):p.rejectWith(f,[x,w,v]),x.statusCode(m),m=void 0,l&&d.trigger(u?"ajaxSuccess":"ajaxError",[x,h,u?c:v]),g.fireWith(f,[x,w]),l&&(d.trigger("ajaxComplete",[x,h]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,s,a,u,l,c,h=Z.ajaxSetup({},t),f=h.context||h,d=h.context&&(f.nodeType||f.jquery)?Z(f):Z.event,p=Z.Deferred(),g=Z.Callbacks("once memory"),m=h.statusCode||{},v={},y={},b=0,_="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!s)for(s={};t=pn.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||_;return r&&r.abort(t),n(0,t),this}};if(p.promise(x).complete=g.add,x.success=x.done,x.error=x.fail,h.url=((e||h.url||wn)+"").replace(fn,"").replace(vn,Cn[1]+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=Z.trim(h.dataType||"*").toLowerCase().match(dt)||[""],null==h.crossDomain&&(u=yn.exec(h.url.toLowerCase()),h.crossDomain=!(!u||u[1]===Cn[1]&&u[2]===Cn[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(Cn[3]||("http:"===Cn[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Z.param(h.data,h.traditional)),P(bn,h,t,x),2===b)return x;l=Z.event&&h.global,l&&0===Z.active++&&Z.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!mn.test(h.type),i=h.url,h.hasContent||(h.data&&(i=h.url+=(hn.test(i)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=dn.test(i)?i.replace(dn,"$1_="+cn++):i+(hn.test(i)?"&":"?")+"_="+cn++)),h.ifModified&&(Z.lastModified[i]&&x.setRequestHeader("If-Modified-Since",Z.lastModified[i]),Z.etag[i]&&x.setRequestHeader("If-None-Match",Z.etag[i])),(h.data&&h.hasContent&&h.contentType!==!1||t.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+xn+"; q=0.01":""):h.accepts["*"]);for(c in h.headers)x.setRequestHeader(c,h.headers[c]);if(h.beforeSend&&(h.beforeSend.call(f,x,h)===!1||2===b))return x.abort();_="abort";for(c in{success:1,error:1,complete:1})x[c](h[c]);if(r=P(_n,h,t,x)){x.readyState=1,l&&d.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){x.abort("timeout")},h.timeout));try{b=1,r.send(v,n)}catch(w){if(!(2>b))throw w;n(-1,w)}}else n(-1,"No Transport");return x},getJSON:function(e,t,n){return Z.get(e,t,n,"json")},getScript:function(e,t){return Z.get(e,void 0,t,"script")}}),Z.each(["get","post"],function(e,t){Z[t]=function(e,n,r,i){return Z.isFunction(n)&&(i=i||r,r=n,n=void 0),Z.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),Z._evalUrl=function(e){return Z.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(e){var t;return Z.isFunction(e)?this.each(function(t){Z(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Z(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return Z.isFunction(e)?this.each(function(t){Z(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Z(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(n){Z(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)};var En=/%20/g,kn=/\[\]$/,Sn=/\r?\n/g,An=/^(?:submit|button|image|reset|file)$/i,Tn=/^(?:input|select|textarea|keygen)/i;Z.param=function(e,t){var n,r=[],i=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){i(this.name,this.value)});else for(n in e)H(n,e[n],t,i);return r.join("&").replace(En,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Z.prop(this,"elements");return e?Z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Z(this).is(":disabled")&&Tn.test(this.nodeName)&&!An.test(e)&&(this.checked||!Et.test(e))}).map(function(e,t){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(e){return{name:t.name,value:e.replace(Sn,"\r\n")}}):{name:t.name,value:n.replace(Sn,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Nn=0,jn={},Ln={0:200,1223:204},On=Z.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in jn)jn[e]()}),Q.cors=!!On&&"withCredentials"in On,Q.ajax=On=!!On,Z.ajaxTransport(function(e){var t;return Q.cors||On&&!e.crossDomain?{send:function(n,r){var i,o=e.xhr(),s=++Nn;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete jn[s],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?r(o.status,o.statusText):r(Ln[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=jn[s]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=Z("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Rn=[],Dn=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Rn.pop()||Z.expando+"_"+cn++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,s,a=t.jsonp!==!1&&(Dn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dn.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=Z.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Dn,"$1"+i):t.jsonp!==!1&&(t.url+=(hn.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||Z.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){s=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Rn.push(i)),s&&Z.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),Z.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var r=st.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=Z.buildFragment([e],t,i),i&&i.length&&Z(i).remove(),Z.merge([],r.childNodes))};var Mn=Z.fn.load;Z.fn.load=function(e,t,n){if("string"!=typeof e&&Mn)return Mn.apply(this,arguments);var r,i,o,s=this,a=e.indexOf(" ");return a>=0&&(r=Z.trim(e.slice(a)),e=e.slice(0,a)),Z.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),s.length>0&&Z.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?Z("<div>").append(Z.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length};var Pn=e.document.documentElement;Z.offset={setOffset:function(e,t,n){var r,i,o,s,a,u,l,c=Z.css(e,"position"),h=Z(e),f={};"static"===c&&(e.style.position="relative"),a=h.offset(),o=Z.css(e,"top"),u=Z.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=h.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),Z.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(f.top=t.top-a.top+s),null!=t.left&&(f.left=t.left-a.left+i),"using"in t?t.using.call(e,f):h.css(f)}},Z.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return t=o.documentElement,Z.contains(t,r)?(typeof r.getBoundingClientRect!==kt&&(i=r.getBoundingClientRect()),n=q(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===Z.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Z.nodeName(e[0],"html")||(r=e.offset()),r.top+=Z.css(e[0],"borderTopWidth",!0),r.left+=Z.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-Z.css(n,"marginTop",!0),left:t.left-r.left-Z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Pn;e&&!Z.nodeName(e,"html")&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||Pn})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;Z.fn[t]=function(i){return mt(this,function(t,i,o){var s=q(t);return void 0===o?s?s[n]:t[i]:(s?s.scrollTo(r?e.pageXOffset:o,r?o:e.pageYOffset):t[i]=o,void 0)},t,i,arguments.length,null)}}),Z.each(["top","left"],function(e,t){Z.cssHooks[t]=w(Q.pixelPosition,function(e,n){return n?(n=x(e,t),zt.test(n)?Z(e).position()[t]+"px":n):void 0})}),Z.each({Height:"height",Width:"width"},function(e,t){Z.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){Z.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return mt(this,function(t,n,r){var i;return Z.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?Z.css(t,n,s):Z.style(t,n,r,s)},t,o?r:void 0,o,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var In=e.jQuery,Fn=e.$;return Z.noConflict=function(t){return e.$===Z&&(e.$=Fn),t&&e.jQuery===Z&&(e.jQuery=In),Z},typeof t===kt&&(e.jQuery=e.$=Z),Z})},{}],32:[function(e,t,n){(function(){var e=this,r=e._,i={},o=Array.prototype,s=Object.prototype,a=Function.prototype,u=o.push,l=o.slice,c=o.concat,h=s.toString,f=s.hasOwnProperty,d=o.forEach,p=o.map,g=o.reduce,m=o.reduceRight,v=o.filter,y=o.every,b=o.some,_=o.indexOf,x=o.lastIndexOf,w=Array.isArray,C=Object.keys,E=a.bind,k=function(e){return e instanceof k?e:this instanceof k?(this._wrapped=e,void 0):new k(e)};"undefined"!=typeof n?("undefined"!=typeof t&&t.exports&&(n=t.exports=k),n._=k):e._=k,k.VERSION="1.6.0";var S=k.each=k.forEach=function(e,t,n){if(null==e)return e;if(d&&e.forEach===d)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,o=e.length;o>r;r++)if(t.call(n,e[r],r,e)===i)return}else for(var s=k.keys(e),r=0,o=s.length;o>r;r++)if(t.call(n,e[s[r]],s[r],e)===i)return;return e};k.map=k.collect=function(e,t,n){var r=[];return null==e?r:p&&e.map===p?e.map(t,n):(S(e,function(e,i,o){r.push(t.call(n,e,i,o))}),r)};var A="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),g&&e.reduce===g)return r&&(t=k.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(S(e,function(e,o,s){i?n=t.call(r,n,e,o,s):(n=e,i=!0)}),!i)throw new TypeError(A);return n},k.reduceRight=k.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),m&&e.reduceRight===m)return r&&(t=k.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var o=e.length;if(o!==+o){var s=k.keys(e);o=s.length}if(S(e,function(a,u,l){u=s?s[--o]:--o,i?n=t.call(r,n,e[u],u,l):(n=e[u],i=!0)}),!i)throw new TypeError(A);return n},k.find=k.detect=function(e,t,n){var r;return T(e,function(e,i,o){return t.call(n,e,i,o)?(r=e,!0):void 0}),r},k.filter=k.select=function(e,t,n){var r=[];return null==e?r:v&&e.filter===v?e.filter(t,n):(S(e,function(e,i,o){t.call(n,e,i,o)&&r.push(e)}),r)},k.reject=function(e,t,n){return k.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},k.every=k.all=function(e,t,n){t||(t=k.identity);var r=!0;return null==e?r:y&&e.every===y?e.every(t,n):(S(e,function(e,o,s){return(r=r&&t.call(n,e,o,s))?void 0:i}),!!r)};var T=k.some=k.any=function(e,t,n){t||(t=k.identity);var r=!1;return null==e?r:b&&e.some===b?e.some(t,n):(S(e,function(e,o,s){return r||(r=t.call(n,e,o,s))?i:void 0}),!!r)};k.contains=k.include=function(e,t){return null==e?!1:_&&e.indexOf===_?-1!=e.indexOf(t):T(e,function(e){return e===t})},k.invoke=function(e,t){var n=l.call(arguments,2),r=k.isFunction(t);return k.map(e,function(e){return(r?t:e[t]).apply(e,n)})},k.pluck=function(e,t){return k.map(e,k.property(t))},k.where=function(e,t){return k.filter(e,k.matches(t))},k.findWhere=function(e,t){return k.find(e,k.matches(t))},k.max=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-1/0,i=-1/0;return S(e,function(e,o,s){var a=t?t.call(n,e,o,s):e;a>i&&(r=e,i=a)}),r},k.min=function(e,t,n){if(!t&&k.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=1/0,i=1/0;return S(e,function(e,o,s){var a=t?t.call(n,e,o,s):e;i>a&&(r=e,i=a)}),r},k.shuffle=function(e){var t,n=0,r=[];return S(e,function(e){t=k.random(n++),r[n-1]=r[t],r[t]=e}),r},k.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=k.values(e)),e[k.random(e.length-1)]):k.shuffle(e).slice(0,Math.max(0,t))};var N=function(e){return null==e?k.identity:k.isFunction(e)?e:k.property(e)};k.sortBy=function(e,t,n){return t=N(t),k.pluck(k.map(e,function(e,r,i){return{value:e,index:r,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),"value")};var j=function(e){return function(t,n,r){var i={};return n=N(n),S(t,function(o,s){var a=n.call(r,o,s,t);e(i,a,o)}),i}};k.groupBy=j(function(e,t,n){k.has(e,t)?e[t].push(n):e[t]=[n]}),k.indexBy=j(function(e,t,n){e[t]=n}),k.countBy=j(function(e,t){k.has(e,t)?e[t]++:e[t]=1}),k.sortedIndex=function(e,t,n,r){n=N(n);for(var i=n.call(r,t),o=0,s=e.length;s>o;){var a=o+s>>>1;n.call(r,e[a])<i?o=a+1:s=a}return o},k.toArray=function(e){return e?k.isArray(e)?l.call(e):e.length===+e.length?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:e.length===+e.length?e.length:k.keys(e).length},k.first=k.head=k.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:l.call(e,0,t)},k.initial=function(e,t,n){return l.call(e,0,e.length-(null==t||n?1:t))},k.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:l.call(e,Math.max(e.length-t,0))},k.rest=k.tail=k.drop=function(e,t,n){return l.call(e,null==t||n?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var L=function(e,t,n){return t&&k.every(e,k.isArray)?c.apply(n,e):(S(e,function(e){k.isArray(e)||k.isArguments(e)?t?u.apply(n,e):L(e,t,n):n.push(e)}),n)};k.flatten=function(e,t){return L(e,t,[])},k.without=function(e){return k.difference(e,l.call(arguments,1))},k.partition=function(e,t){var n=[],r=[];return S(e,function(e){(t(e)?n:r).push(e)}),[n,r]},k.uniq=k.unique=function(e,t,n,r){k.isFunction(t)&&(r=n,n=t,t=!1);var i=n?k.map(e,n,r):e,o=[],s=[];return S(i,function(n,r){(t?r&&s[s.length-1]===n:k.contains(s,n))||(s.push(n),o.push(e[r]))}),o},k.union=function(){return k.uniq(k.flatten(arguments,!0))},k.intersection=function(e){var t=l.call(arguments,1);return k.filter(k.uniq(e),function(e){return k.every(t,function(t){return k.contains(t,e)})})},k.difference=function(e){var t=c.apply(o,l.call(arguments,1));return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){for(var e=k.max(k.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=k.pluck(arguments,""+n);return t},k.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},k.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if("number"!=typeof n)return r=k.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(_&&e.indexOf===_)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},k.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(x&&e.lastIndexOf===x)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},k.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,o=new Array(r);r>i;)o[i++]=e,e+=n;return o};var O=function(){};k.bind=function(e,t){var n,r;if(E&&e.bind===E)return E.apply(e,l.call(arguments,1));if(!k.isFunction(e))throw new TypeError;return n=l.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(l.call(arguments)));O.prototype=e.prototype;var i=new O;O.prototype=null;var o=e.apply(i,n.concat(l.call(arguments)));return Object(o)===o?o:i}},k.partial=function(e){var t=l.call(arguments,1);return function(){for(var n=0,r=t.slice(),i=0,o=r.length;o>i;i++)r[i]===k&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return e.apply(this,r)}},k.bindAll=function(e){var t=l.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return S(t,function(t){e[t]=k.bind(e[t],e)}),e},k.memoize=function(e,t){var n={};return t||(t=k.identity),function(){var r=t.apply(this,arguments);return k.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},k.delay=function(e,t){var n=l.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},k.defer=function(e){return k.delay.apply(k,[e,1].concat(l.call(arguments,1)))},k.throttle=function(e,t,n){var r,i,o,s=null,a=0;n||(n={});var u=function(){a=n.leading===!1?0:k.now(),s=null,o=e.apply(r,i),r=i=null};return function(){var l=k.now();a||n.leading!==!1||(a=l);var c=t-(l-a);return r=this,i=arguments,0>=c?(clearTimeout(s),s=null,a=l,o=e.apply(r,i),r=i=null):s||n.trailing===!1||(s=setTimeout(u,c)),o}},k.debounce=function(e,t,n){var r,i,o,s,a,u=function(){var l=k.now()-s;t>l?r=setTimeout(u,t-l):(r=null,n||(a=e.apply(o,i),o=i=null))};return function(){o=this,i=arguments,s=k.now();var l=n&&!r;return r||(r=setTimeout(u,t)),l&&(a=e.apply(o,i),o=i=null),a}},k.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},k.wrap=function(e,t){return k.partial(t,e)},k.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},k.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},k.keys=function(e){if(!k.isObject(e))return[];if(C)return C(e);var t=[];for(var n in e)k.has(e,n)&&t.push(n);return t},k.values=function(e){for(var t=k.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},k.pairs=function(e){for(var t=k.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},k.invert=function(e){for(var t={},n=k.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},k.functions=k.methods=function(e){var t=[];for(var n in e)k.isFunction(e[n])&&t.push(n);return t.sort()},k.extend=function(e){return S(l.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},k.pick=function(e){var t={},n=c.apply(o,l.call(arguments,1));return S(n,function(n){n in e&&(t[n]=e[n])}),t},k.omit=function(e){var t={},n=c.apply(o,l.call(arguments,1));for(var r in e)k.contains(n,r)||(t[r]=e[r]);return t},k.defaults=function(e){return S(l.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e};var R=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var i=h.call(e);if(i!=h.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=n.length;o--;)if(n[o]==e)return r[o]==t;var s=e.constructor,a=t.constructor;if(s!==a&&!(k.isFunction(s)&&s instanceof s&&k.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1;n.push(e),r.push(t);var u=0,l=!0;if("[object Array]"==i){if(u=e.length,l=u==t.length)for(;u--&&(l=R(e[u],t[u],n,r)););}else{for(var c in e)if(k.has(e,c)&&(u++,!(l=k.has(t,c)&&R(e[c],t[c],n,r))))break;if(l){for(c in t)if(k.has(t,c)&&!u--)break;l=!u}}return n.pop(),r.pop(),l};k.isEqual=function(e,t){return R(e,t,[],[])},k.isEmpty=function(e){if(null==e)return!0;if(k.isArray(e)||k.isString(e))return 0===e.length;for(var t in e)if(k.has(e,t))return!1;return!0},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=w||function(e){return"[object Array]"==h.call(e)},k.isObject=function(e){return e===Object(e)},S(["Arguments","Function","String","Number","Date","RegExp"],function(e){k["is"+e]=function(t){return h.call(t)=="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return!(!e||!k.has(e,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(e){return"function"==typeof e}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!=+e},k.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==h.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return f.call(e,t)},k.noConflict=function(){return e._=r,this},k.identity=function(e){return e},k.constant=function(e){return function(){return e}},k.property=function(e){return function(t){return t[e]}},k.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},k.times=function(e,t,n){for(var r=Array(Math.max(0,e)),i=0;e>i;i++)r[i]=t.call(n,i);return r},k.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},k.now=Date.now||function(){return(new Date).getTime()};var D={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};D.unescape=k.invert(D.escape);var M={escape:new RegExp("["+k.keys(D.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(D.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(e){k[e]=function(t){return null==t?"":(""+t).replace(M[e],function(t){return D[e][t]})}}),k.result=function(e,t){if(null==e)return void 0;var n=e[t];return k.isFunction(n)?n.call(e):n},k.mixin=function(e){S(k.functions(e),function(t){var n=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),H.call(this,n.apply(k,e))}})};var P=0;k.uniqueId=function(e){var t=++P+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(e,t,n){var r;n=k.defaults({},n,k.templateSettings);var i=new RegExp([(n.escape||I).source,(n.interpolate||I).source,(n.evaluate||I).source].join("|")+"|$","g"),o=0,s="__p+='";e.replace(i,function(t,n,r,i,a){return s+=e.slice(o,a).replace(B,function(e){return"\\"+F[e]}),n&&(s+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(s+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(s+="';\n"+i+"\n__p+='"),o=a+t.length,t}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{r=new Function(n.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(t)return r(t,k);var u=function(e){return r.call(this,e,k)};return u.source="function("+(n.variable||"obj")+"){\n"+s+"}",u},k.chain=function(e){return k(e).chain()};var H=function(e){return this._chain?k(e).chain():e};k.mixin(k),S(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];k.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],H.call(this,n)}}),S(["concat","join","slice"],function(e){var t=o[e];k.prototype[e]=function(){return H.call(this,t.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return k})}).call(this)},{}]},{},[1]);